<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <title>gagl</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR&display=swap" rel="stylesheet">

    <script type="module">
        import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

        window.supabase = createClient(
            "https://piafesfywtvpachbfoxr.supabase.co",
            "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBpYWZlc2Z5d3R2cGFjaGJmb3hyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDQ3ODQwMTgsImV4cCI6MjA2MDM2MDAxOH0.1aDNwRZXac48nD9HDicXvDYk4wfcY1MC487_qf3hF5c"
        );

    </script>

    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: black;
            margin: 0;
            padding: 0;
            color: white;
            display: flex;
            /* justify-content: center; */
            align-items: center;
            flex-direction: column;
            height: 100vh;
            font-size: 14px;
            /* position: fixed; */
            /* í™”ë©´ê³ ì •ë°°ì¹˜ ìŠ¤í¬ë¡¤í•´ë„ ì•ˆì›€ì§ì„ */
            /* justify-content: space-between; */
            /* ì–‘ìª½ì •ë ¬ */
            font-weight: 500;
        }

        .ë°‘ì¤„ {
            border-bottom: 0.2px solid #4b4b4b;
            /* position: fixed; */
            /* top: 0; */
            width: 100%;
            height: 56px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .ê°€ë¡œì •ë ¬ {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .ì„¸ë¡œì •ë ¬ {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            gap: 10px;
        }

        .ì–‘ìª½ì •ë ¬ {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            gap: 10px;
        }

        .ì‚¬ë°±í”½ì…€ {
            width: 400px;
        }

        .ë²„íŠ¼ {
            border-radius: 5px;
            padding: 5px;
            text-align: center;
        }

        .ê³µê²©ë²„íŠ¼ {
            margin-top: 15px;
            background-color: #fafafa;
            color: black;
            border-radius: 5px;
            padding: 7px 17px;
            text-align: center;
        }

        .ê³µê²©ë²„íŠ¼:hover {
            background-color: #9e9e9e;
            cursor: pointer;
        }

        .ë ˆì–´ëª¬ìŠ¤í„° {
            margin-top: 7px;
            background-color: #a853f7;
            color: black;
            border-radius: 5px;
            padding: 7px 17px;
            text-align: center;
        }

        .ë ˆì–´ëª¬ìŠ¤í„°:hover {
            background-color: #9019ff;
            cursor: pointer;
        }

        .ë²„íŠ¼:hover {
            background-color: #333;
            cursor: pointer;
        }

        .ì»¤ì„œí˜¸ë²„:hover {
            cursor: pointer;
        }

        .ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ {
            margin-top: 15px;
            width: 400px;
            border: 0.2px solid #4b4b4b;
            border-radius: 10px;
            padding: 15px;
        }

        .ê¸°ë³¸í…Œë‘ë¦¬ {
            margin-top: 15px;
            width: 100%;
            box-sizing: border-box;
            border: 0.2px solid #4b4b4b;
            border-radius: 10px;
            padding: 15px;
        }

        .ì—ë„ˆì§€ë°” {
            background-color: #eab308;
            height: 5px;
            border-radius: 10px;
            width: 100%;
        }

        .ìœ ì €í…Œë‘ë¦¬ {
            border: 0.2px solid #3b82f6;
            border-radius: 10px;
            padding: 15px;
            /* width: 100%; */
        }

        .ëª¬ìŠ¤í„°í…Œë‘ë¦¬ {
            border: 0.2px solid #f63b3b;
            border-radius: 10px;
            padding: 15px;
            /* width: 100%; */

        }

        .ê²½í—˜ì¹˜ê³¨ë“œìˆ™ë ¨ë„ {
            background-color: #121212;
            height: 85px;
            border-radius: 10px;
            width: 100px;
            padding: 15px;
        }

        .ë ˆë²¨ {
            color: #00c851;
        }

        .ì´ê²½í—˜ì¹˜ {
            color: #ffffff;
            font-size: 16px;
            font-weight: bold;
        }

        .íšë“ê²½í—˜ì¹˜ {
            color: #7a7a7a;
            font-size: 10px;
            font-weight: lighter;
        }

        .ê³¨ë“œ {
            color: #b0b0b0;
        }

        .ì´ê³¨ë“œ {
            color: #f5c400;
            font-size: 16px;
            font-weight: bold;
        }

        .íšë“ê³¨ë“œ {
            color: #00c851;
            font-size: 10px;
            font-weight: lighter;
        }

        .ìˆ™ë ¨ë„ {
            color: #b0b0b0;
        }

        .ì´ìˆ™ë ¨ë„ {
            color: #3b82f6;
            font-size: 16px;
            font-weight: bold;
        }

        .íšë“ìˆ™ë ¨ë„ {
            color: #00c851;
            font-size: 10px;
            font-weight: lighter;
        }

        .ì½˜ì†”ë¡œê·¸ì°½ {
            color: #ffffff;
            border-radius: 10px;
            position: fixed;
            left: 0;
            bottom: 0;
            font-weight: bold;
        }

        .ë¡œë”©ì»¨í…Œì´ë„ˆ {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            font-family: sans-serif;
            font-size: 16px;
        }

        .ë¡œë”©ìŠ¤í”¼ë„ˆ {
            width: 50px;
            height: 50px;
            border: 6px solid #ccc;
            border-top-color: #007bff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        .ë„¤ì˜¨ë°•ìŠ¤ {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 9999;

            width: 320px;
            padding: 10px 20px;
            text-align: center;
            font-weight: bold;
            font-size: 14px;
            color: #c653ff;
            border-radius: 10px;

            background-color: black;
            background-image: linear-gradient(to right, rgba(198, 83, 255, 0.15), rgba(255, 0, 150, 0.15));
            background-blend-mode: overlay;

            box-shadow:
                0 0 8px 0px rgba(198, 83, 255, 0.5),
                0 0 14px 0px rgba(255, 0, 150, 0.4),
                inset 0 0 4px #000;

            animation: ë„¤ì˜¨í„ìŠ¤ 1.5s ease-in-out infinite alternate;
        }


        @keyframes ë„¤ì˜¨í„ìŠ¤ {
            0% {
                box-shadow:
                    0 0 15px 5px rgba(198, 83, 255, 0.3),
                    0 0 30px 5px rgba(255, 0, 150, 0.2),
                    inset 0 0 6px #000;
                color: #b366ff;
            }

            100% {
                box-shadow:
                    0 0 10px 10px rgba(198, 83, 255, 0.5),
                    0 0 50px 10px rgba(255, 0, 150, 0.4),
                    inset 0 0 10px #000;
                color: #ff99ff;
            }
        }

        @keyframes spin {
            0% {
                transform: rotate(0deg);
            }

            100% {
                transform: rotate(360deg);
            }
        }

        /* 
        #ì‚¬ëƒ¥ë¡œê·¸ë°•ìŠ¤ {
            max-height: 220px;
            overflow-y: hidden;
        } */

        /* ìë™ìœ¼ë¡œ ì‚¬ë¼ì§€ê²Œ í•˜ëŠ” í˜ì´ë“œ ì•„ì›ƒ */
        @keyframes fadeOut {
            0% {
                opacity: 1;
            }

            70% {
                opacity: 1;
            }

            100% {
                opacity: 0;
                display: none;
            }
        }



        #ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸ {
            font-size: 16px;
            margin-top: 10px;
        }

        #íšë“ë¡œê·¸ {
            color: #00c851;
        }

        #ë ˆë²¨ì—…í‘œì‹œ {
            color: #00c851;
        }

        #ì¸µì¡°ì ˆ {
            background: transparent;
            /* ë‚´ë¶€ ë°°ê²½ ì œê±° */
            border: 2px solid #ff3300;
            box-shadow:
                0 0 12px #ff0000,
                /* ë°”ê¹¥ìª½ ë°œê´‘ íš¨ê³¼ */
                0 0 24px #440000,
                /* ë°”ê¹¥ìª½ ì–´ë‘ìš´ ë°œê´‘ */
                0 0 0 4px rgba(255, 0, 0, 0.2) inset;
            /* ì•ˆìª½ í…Œë‘ë¦¬ ê°•ì¡° */
            animation: ë§ˆê³„ë¶ˆê¸¸ 4s ease-in-out infinite;
            gap: 30px;
            position: relative;
            border-radius: 10px;
            /* ë‘¥ê¸€ê²Œ ìœ ì§€ */
            color: white;
        }

        @keyframes ë§ˆê³„ë¶ˆê¸¸ {

            0%,
            100% {
                filter: brightness(1);
            }

            50% {
                filter: brightness(1.3);
            }
        }

        .crown-icon {
            width: 20px;
            height: 20px;
            margin-right: 8px;
        }

        .ê¸ˆ {
            stroke: gold;
        }

        .ì€ {
            stroke: silver;
        }

        .ë™ {
            stroke: #cd7f32;
        }

        #ë³´ìœ ìˆ™ë ¨ë„:hover {
            cursor: pointer;
            text-decoration: underline;
            color: #3b82f6;
        }

        .target-icon {
            width: 16px;
            height: 16px;
            stroke-width: 2;
            stroke-linecap: round;
            stroke-linejoin: round;
            margin-right: 4px;
        }

        .ë‚´ì•„ì´ë””ê°•ì¡° {
            background-color: #505050;
            /* font-weight: bold;
            border-radius: 6px; */
        }

        .ìƒ‰ìƒì‹¤í—˜ {
            background-color: #8b5cf6;
            background-color: #3bf0f6;
            background-color: #5cf669;
            background-color: #f6ec5c;
        }

        #ì „íˆ¬ë²„íŠ¼ë°•ìŠ¤ {
            position: relative;
            /* âœ… ì¶”ê°€ */
        }

        #ì „íˆ¬í™”ë©´ {
            position: relative;
        }

        .ìë™ì‚¬ëƒ¥ {
            border-radius: 5px;
            padding: 5px;
            background-color: #fafafa;
            color: black;
        }

        @keyframes ì•…ë§ˆê°•ë¦¼íš¨ê³¼ {
            0% {
                box-shadow: 0 0 10px 5px red, inset 0 0 10px red;
                filter: brightness(1.5) blur(0px);
            }

            50% {
                box-shadow: 0 0 20px 10px darkred, inset 0 0 20px darkred;
                filter: brightness(2) blur(1px);
                transform: scale(1.02) rotate(1deg);
            }

            100% {
                box-shadow: 0 0 10px 5px red, inset 0 0 10px red;
                filter: brightness(1.2) blur(0px);
                transform: scale(1) rotate(0deg);
            }
        }

        * {
            user-select: none;
        }

        @keyframes ê¹œë¹¡ì„ {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0;
            }
        }

        /* cssì¶”ê°€ */
    </style>
</head>

<body>
    <div style="position: fixed; top: 6px; left: 10px; display: flex; align-items: center; z-index: 9999;">
        <div id="ë²„ì „í‘œì‹œ" style="color: #bebebe; font-size: 20px; opacity: 0.8; cursor: pointer;">
        </div>
        <span id="ë©”ë‰´ì–¼íŒíŠ¸" style="margin-left: 8px; color: #bebebe; font-size: 14px; animation: ê¹œë¹¡ì„ 1.2s infinite;">
            &lt;&lt; í´ë¦­ ì‹œ ë©”ë‰´ì–¼ ì˜¤í”ˆ
        </span>
    </div>
    <div class="ë„¤ì˜¨ë°•ìŠ¤" id="ë„¤ì˜¨ë°•ìŠ¤">
        gaglì— ì°¾ì•„ì™€ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤
    </div>

    <div class="ë°‘ì¤„" id="ìƒë‹¨ë°”">
        <div class="ì–‘ìª½ì •ë ¬ ì‚¬ë°±í”½ì…€">
            <div id="íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ" class="ì»¤ì„œí˜¸ë²„">gagl</div>

            <div id="ì „íˆ¬ìŠ¤í‚¬ì„¤ì •ë²„íŠ¼" style="display: none;">
                <div class="ê°€ë¡œì •ë ¬">
                    <div class="ë²„íŠ¼" id="ì „íˆ¬">
                        ì „íˆ¬
                    </div>
                    <div class="ë²„íŠ¼" id="ì¥ë¹„">
                        ì¥ë¹„
                    </div>
                    <div class="ë²„íŠ¼" id="ìŠ¤í‚¬">
                        ìŠ¤í‚¬
                    </div>
                    <div class="ë²„íŠ¼" id="ì „ë‹¹">
                        ì „ë‹¹
                    </div>
                    <div class="ë²„íŠ¼" id="íƒˆí‡´" onclick="íšŒì›íƒˆí‡´()">
                        íƒˆí‡´
                    </div>
                </div>
            </div>
        </div>
    </div>




    <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬" id="ì—ë„ˆì§€ë°•ìŠ¤" style="display: none;">
        <div class="ì–‘ìª½ì •ë ¬">
            <div style="color: #eab308;">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-zap-icon lucide-zap">
                    <path
                        d="M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z" />
                </svg>
            </div>
            <div id="ìŠ¤íƒœë¯¸ë„ˆí‘œì‹œ" style="color: white;">
                â™¾ï¸
            </div>
        </div>
        <div class="ì—ë„ˆì§€ë°”">

        </div>
    </div>



    <div id="ì¸ì¦í™”ë©´" class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬">
        <input id="ì´ë©”ì¼ì…ë ¥" type="text" placeholder="í•œê¸€x, ì˜ë¬¸ì•„ì´ë”” ì…ë ¥" autocomplete="off" />
        <input id="ë¹„ë²ˆì…ë ¥" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥" autocomplete="off" />
        <button onclick="íšŒì›ê°€ì…()">íšŒì›ê°€ì…</button>
        <button onclick="ë¡œê·¸ì¸()">ë¡œê·¸ì¸</button>
    </div>



    <div id="ì „íˆ¬í™”ë©´" style="display: none;">
        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ê°€ë¡œì •ë ¬" id="ì¸µì¡°ì ˆ">
            <div id="ì•„ë˜ì¸µìœ¼ë¡œ">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-arrow-big-down-dash-icon lucide-arrow-big-down-dash">
                    <path d="M15 5H9" />
                    <path d="M15 9v3h4l-7 7-7-7h4V9z" />
                </svg>
            </div>
            <div id="í˜„ì¬ì¸µ">
                1ì¸µ
            </div>
            <div id="ìœ„ì¸µìœ¼ë¡œ">
                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="lucide lucide-arrow-big-up-dash-icon lucide-arrow-big-up-dash">
                    <path d="M9 19h6" />
                    <path d="M9 15v-3H5l7-7 7 7h-4v3H9z" />
                </svg>
            </div>

        </div>

        <div id="ì‚¬ëƒ¥ê²°ê³¼1">
            <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬">
                <div class="ê°€ë¡œì •ë ¬">
                    <div class="ê²½í—˜ì¹˜ê³¨ë“œìˆ™ë ¨ë„ ì„¸ë¡œì •ë ¬">
                        <div class="ë ˆë²¨" id="ë ˆë²¨">
                            ë ˆë²¨ 129
                        </div>
                        <div class="ì´ê²½í—˜ì¹˜" id="ì´ê²½í—˜ì¹˜">
                            12,932
                        </div>
                        <div class="íšë“ê²½í—˜ì¹˜" id="íšë“ê²½í—˜ì¹˜">
                            45
                        </div>
                    </div>
                    <div class="ê²½í—˜ì¹˜ê³¨ë“œìˆ™ë ¨ë„ ì„¸ë¡œì •ë ¬" id="ê³¨ë“œí…Œë‘ë¦¬ì•ˆí‘œì‹œ">
                        <div class="ê³¨ë“œ" id="ê³¨ë“œ">
                            ê³¨ë“œ
                        </div>
                        <div class="ì´ê³¨ë“œ" id="ì´ê³¨ë“œ">
                            999,999
                        </div>
                        <div class="íšë“ê³¨ë“œ" id="íšë“ê³¨ë“œ">
                            999
                        </div>

                    </div>
                    <div class="ê²½í—˜ì¹˜ê³¨ë“œìˆ™ë ¨ë„ ì„¸ë¡œì •ë ¬" id="ìˆ™ë ¨ë„í…Œë‘ë¦¬ì•ˆí‘œì‹œ">
                        <div class="ìˆ™ë ¨ë„" id="ìˆ™ë ¨ë„">
                            ìˆ™ë ¨ë„
                        </div>
                        <div class="ì´ìˆ™ë ¨ë„" id="ì´ìˆ™ë ¨ë„">
                            999,999
                        </div>
                        <div class="íšë“ìˆ™ë ¨ë„" id="íšë“ìˆ™ë ¨ë„">
                            999
                        </div>

                    </div>
                </div>
            </div>

            <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬" id="ë“±ê¸‰ì™¸í…Œë‘ë¦¬">
                <div class="ì„¸ë¡œì •ë ¬" id="ì „íˆ¬ë²„íŠ¼ë°•ìŠ¤">
                    <div style="display: none;" class="ë ˆì–´ëª¬ìŠ¤í„°" id="ë ˆì–´ëª¬ìŠ¤í„°">ë ˆì–´ëª¬ìŠ¤í„°</div>
                    <div>
                        <div style="display: inline-block;" class="ê³µê²©ë²„íŠ¼" id="ê³µê²©ë²„íŠ¼">ì•…ë§ˆì„±</div>
                    </div>

                </div>


                <div class="ê°€ë¡œì •ë ¬" id="ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸">
                </div>
                <div class="ê°€ë¡œì •ë ¬" id="íšë“ë¡œê·¸">
                </div>
                <div class="ê°€ë¡œì •ë ¬" id="ì¶”ê°€íšë“ë¡œê·¸">
                </div>

                <div class="ê°€ë¡œì •ë ¬" id="ë ˆë²¨ì—…í‘œì‹œ">

                </div>
            </div>
        </div>

        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ìœ ì €í…Œë‘ë¦¬ ì–‘ìª½ì •ë ¬" id="ìœ ì €í…Œë‘ë¦¬ì•ˆí‘œì‹œ">
            <div id="ìœ ì €ì•„ì´ë””">
                ì˜ì
            </div>
            <div class="ì„¸ë¡œì •ë ¬">
                <div id="ìœ ì €ê³µê²©ë ¥">
                    ê³µê²©ë ¥ 100
                </div>
                <div id="ìœ ì €ì²´ë ¥">
                    ì²´ë ¥ 100
                </div>
            </div>

        </div>
        <div id="ëª¬ìŠ¤í„°í…Œë‘ë¦¬ì•ˆí‘œì‹œ">
            <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ëª¬ìŠ¤í„°í…Œë‘ë¦¬ ì–‘ìª½ì •ë ¬">
                <div id="ì•…ë§ˆì´ë¦„">
                    ëª¬ìŠ¤í„°
                </div>
                <div class="ì„¸ë¡œì •ë ¬">
                    <div id="ì•…ë§ˆì²´ë ¥">
                        ì²´ë ¥ 100
                    </div>
                    <div id="ì•…ë§ˆë°©ì–´ë ¥">
                        ë°©ì–´ë ¥ 10
                    </div>
                </div>

            </div>
        </div>


    </div>

    <div id="ì „ë‹¹í™”ë©´" style="display: none;">
        <div id="ì „ë‹¹ì»¨í…Œì´ë„ˆ" class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬">
        </div>
    </div>


    <div id="ë¸”ë¡œì»¤" style="
  position: fixed;
  top: 0; left: 0; right: 0; bottom: 0;
  background: rgba(0, 0, 0, 0);
  z-index: 9999;
  display: none;
  cursor: wait;
"></div>

    <div id="ì¥ë¹„í™”ë©´" style="display: none;">
        <div class="ë°‘ì¤„ ì–‘ìª½ì •ë ¬">
            <div>ê°•ë¦¼ì¹´ìš´íŠ¸</div>
            <div class="ê°€ë¡œì •ë ¬">
                <div id="ì¥ë¹„ëª©ë¡"></div>
                <!-- <div class="ë²„íŠ¼" onclick="ì¥ë¹„ìë™í•©ì„±()">ìë™í•©ì„±</div> -->
            </div>
        </div>

        <div id="ì¥ë¹„ê³¨ë“œí‘œì‹œ" style="color: #f5c400;">0 Gold</div>

        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬" id="ì¥ë¹„ì»¨í…Œì´ë„ˆ">
        </div>
    </div>

    <div id="ìŠ¤í‚¬í™”ë©´" style="display: none;">
        <div class="ë°‘ì¤„" id="ë³´ìœ ìˆ™ë ¨ë„">

        </div>
        <div style="font-size: 12px; color: #888" id="í•„ìš”ìˆ™ë ¨ë„">

        </div>

        <div class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬" id="ìŠ¤í‚¬ì»¨í…Œì´ë„ˆ">
        </div>
    </div>

    <div id="ë¯¸ë‹ˆì¥ë¹„ì°½" class="ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬" style="
    position: fixed;
    top: 57px;
    left: 300px;
    z-index: 99999;
    background: black;
    color: white;
    display: none;
    max-height: 600px;
    overflow-y: auto;
  "></div>

    <div id="ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤" style="
    position: fixed;
    top: 0;
    left: 0;
    width: 50%;
    height: 100vh;
    z-index: 9999;
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    justify-content: flex-start;
    padding: 10px;
    box-sizing: border-box;
    pointer-events: none;
"></div>

    <!-- ğŸŸ¢ ë„ë°•ì°½ -->
    <div id="ë„ë°•ì°½" class="ê¸°ë³¸í…Œë‘ë¦¬ ì„¸ë¡œì •ë ¬" style="
  display: none;
  position: fixed;
  top: 60%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: black;
  color: white;
  z-index: 9998;
  padding: 20px;
  text-align: center;
  width:auto;
">
        <div id="ë„ë°•íƒ€ì´í‹€" style="font-size: 20px; font-weight: bold;"></div>
        <div style="margin-top: 15px;">
            <div class="ë²„íŠ¼" onclick="ë„ë°•ì‹œë„('ë ˆì–´')">ë ˆì–´ ì¥ë¹„ (10ë§Œ)</div>
            <div class="ë²„íŠ¼" onclick="ë„ë°•ì‹œë„('ì‹ í™”')">ì‹ í™” ì¥ë¹„ (30ë§Œ)</div>
            <div class="ë²„íŠ¼" onclick="ë„ë°•ì‹œë„('ê³ ëŒ€')">ê³ ëŒ€ ì¥ë¹„ (100ë§Œ)</div>
            <div class="ë²„íŠ¼" onclick="ë„ë°•ì‹œë„('íƒœì´ˆ')">íƒœì´ˆ ì¥ë¹„ (1000ë§Œ)</div>
            <div class="ë²„íŠ¼" onclick="ë„ë°•ì‹œë„('ê³µí—ˆ')">ê³µí—ˆ ì¥ë¹„ (1ì–µ)</div>
        </div>
    </div>


    <!-- ê°ì²´ì¶”ê°€ -->

    <script>
        // ìµœì´ˆ ì ‘ì† ì‹œ ê¸°ê¸°IDë¥¼ localStorageì— ì €ì¥
        let ê¸°ê¸°ID = localStorage.getItem("ê¸°ê¸°ID");

        if (!ê¸°ê¸°ID) {
            ê¸°ê¸°ID = crypto.randomUUID();  // ë¸Œë¼ìš°ì € ë‚´ì¥ UUID ìƒì„±ê¸°
            localStorage.setItem("ê¸°ê¸°ID", ê¸°ê¸°ID);
        }

        // ìƒ‰ì°¾ê¸°
        const ìƒ‰ìƒë§µ = {
            "ì¼ë°˜": "#4b4b4b",
            "ë ˆì–´": "#00ff00",
            "ì‹ í™”": "#0000ff",
            "ê³ ëŒ€": "#ffff00",
            "íƒœì´ˆ": "#800080",
            "ê³µí—ˆ": "#ff0000",

            "ë¹¨": "#ff0000",
            "ì£¼": "#ff8000",
            "ë…¸": "#ffff00",
            "ì´ˆ": "#00ff00",
            "íŒŒ": "#0080ff",
            "ë‚¨": "#8a2be2",
            "ë³´": "#800080",

            "ë¹¨ì£¼": "#ff4000",
            "ì£¼ë…¸": "#ffbf00",
            "ë…¸ì´ˆ": "#80ff00",
            "ì´ˆíŒŒ": "#00ff80",
            "íŒŒë‚¨": "#4455d0",
            "ë‚¨ë³´": "#851bb1"
        };

        const í¬ë¦¬í‹°ì»¬ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-axe-icon lucide-axe"><path d="m14 12-8.5 8.5a2.12 2.12 0 1 1-3-3L11 9"/><path d="M15 13 9 7l4-4 6 6h3a8 8 0 0 1-7 7z"/></svg>`;
        const ë²„ì„œì»¤ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-flame-icon lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>`;
        const ë“œë ˆì¸ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-droplet-icon lucide-droplet"><path d="M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z"/></svg>`;
        const ì¸ì‚¬ì´íŠ¸ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-diamond-plus-icon lucide-diamond-plus"><path d="M12 8v8"/><path d="M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41L13.7 2.71a2.41 2.41 0 0 0-3.41 0z"/><path d="M8 12h8"/></svg>`;
        const ì•„ì´ì–¸ë°”ë””ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-biceps-flexed-icon lucide-biceps-flexed"><path d="M12.409 13.017A5 5 0 0 1 22 15c0 3.866-4 7-9 7-4.077 0-8.153-.82-10.371-2.462-.426-.316-.631-.832-.62-1.362C2.118 12.723 2.627 2 10 2a3 3 0 0 1 3 3 2 2 0 0 1-2 2c-1.105 0-1.64-.444-2-1"/><path d="M15 14a5 5 0 0 0-7.584 2"/><path d="M9.964 6.825C8.019 7.977 9.5 13 8 15"/></svg>`;
        const í€µë‹ˆìŠ¤ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-history-icon lucide-history"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/><path d="M12 7v5l4 2"/></svg>`;
        const ë°œêµ´ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-gem-icon lucide-gem"><path d="M6 3h12l4 6-10 13L2 9Z"/><path d="M11 3 8 9l4 13 4-13-3-6"/><path d="M2 9h20"/></svg>`;
        const ë¨¸ë‹ˆì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-coins-icon lucide-coins"><circle cx="8" cy="8" r="6"/><path d="M18.09 10.37A6 6 0 1 1 10.34 18"/><path d="M7 6h1v4"/><path d="m16.71 13.88.7.71-2.82 2.82"/></svg>`;
        const ì„±ê³µì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-party-popper-icon lucide-party-popper"><path d="M5.8 11.3 2 22l10.7-3.79"/><path d="M4 3h.01"/><path d="M22 8h.01"/><path d="M15 2h.01"/><path d="M22 20h.01"/><path d="m22 2-2.24.75a2.9 2.9 0 0 0-1.96 3.12c.1.86-.57 1.63-1.45 1.63h-.38c-.86 0-1.6.6-1.76 1.44L14 10"/><path d="m22 13-.82-.33c-.86-.34-1.82.2-1.98 1.11c-.11.7-.72 1.22-1.43 1.22H17"/><path d="m11 2 .33.82c.34.86-.2 1.82-1.11 1.98C9.52 4.9 9 5.52 9 6.23V7"/><path d="M11 13c1.93 1.93 2.83 4.17 2 5-.83.83-3.07-.07-5-2-1.93-1.93-2.83-4.17-2-5 .83-.83 3.07.07 5 2Z"/></svg>`;
        const ì‹¤íŒ¨ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-ban-icon lucide-ban"><circle cx="12" cy="12" r="10"/><path d="m4.9 4.9 14.2 14.2"/></svg>`;
        const ë§ˆìŠ¤í„°ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-graduation-cap-icon lucide-graduation-cap"><path d="M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z"/><path d="M22 10v6"/><path d="M6 12.5V16a6 3 0 0 0 12 0v-3.5"/></svg>`;
        const ë²„ë‹ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-battery-charging-icon lucide-battery-charging"><path d="M15 7h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2"/><path d="M6 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h1"/><path d="m11 7-3 5h4l-3 5"/><line x1="22" x2="22" y1="11" y2="13"/></svg>`;
        const ë„ë°•ì•„ì´ì½˜ = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-dices-icon lucide-dices"><rect width="12" height="12" x="2" y="10" rx="2" ry="2"/><path d="m17.92 14 3.5-3.5a2.24 2.24 0 0 0 0-3l-5-4.92a2.24 2.24 0 0 0-3 0L10 6"/><path d="M6 18h.01"/><path d="M10 14h.01"/><path d="M15 6h.01"/><path d="M18 9h.01"/></svg>`;

        function í™”ë©´ì ê¸ˆ() {
            document.body.style.pointerEvents = "none";
            document.body.style.opacity = "0.5";
            const ë²„íŠ¼ë“¤ = document.querySelectorAll("button");
            ë²„íŠ¼ë“¤.forEach(btn => btn.disabled = true);
        }

        function í™”ë©´í•´ì œ() {
            document.body.style.pointerEvents = "auto";
            document.body.style.opacity = "1";
            const ë²„íŠ¼ë“¤ = document.querySelectorAll("button");
            ë²„íŠ¼ë“¤.forEach(btn => btn.disabled = false);
        }

        function ë©”ì‹œì§€í‘œì‹œ(ëŒ€ìƒ, ì•„ì´ì½˜HTML, í…ìŠ¤íŠ¸, ê¸€ììƒ‰) {
            // const ëŒ€ìƒ = document.getElementById("ì¸µì¡°ì ˆ");
            const rect = ëŒ€ìƒ.getBoundingClientRect();

            const el = document.createElement("div");
            el.innerHTML = `
        ${ì•„ì´ì½˜HTML}<span>${í…ìŠ¤íŠ¸}</span>
    `;
            el.style.position = "absolute";
            el.style.left = `${rect.left + Math.random() * rect.width}px`;
            el.style.top = `${rect.top + Math.random() * rect.height}px`;
            el.style.color = ê¸€ììƒ‰;
            // el.style.background = ;
            el.style.padding = "8px 12px";
            el.style.borderRadius = "8px";
            // el.style.background = "rgba(0,0,0,0.7)";
            el.style.fontWeight = "bold";
            el.style.zIndex = 9999;
            el.style.pointerEvents = "none";
            el.style.animation = "fadeOut 2s ease-out forwards";
            el.style.whiteSpace = "nowrap";

            document.body.appendChild(el);
            setTimeout(() => el.remove(), 2000);
        }

        async function íšŒì›ê°€ì…() {
            í™”ë©´ì ê¸ˆ();

            const ì•„ì´ë”” = document.getElementById("ì´ë©”ì¼ì…ë ¥").value.trim();
            const ë¹„ë²ˆ = document.getElementById("ë¹„ë²ˆì…ë ¥").value.trim();
            const ì´ë©”ì¼í˜•ì‹ = `${ì•„ì´ë””}@gagl.com`;
            const ìœ ì €ì•„ì´ë”” = ì•„ì´ë””;
            const ê¸°ê¸°ID = localStorage.getItem("ê¸°ê¸°ID") || crypto.randomUUID();

            localStorage.setItem("ê¸°ê¸°ID", ê¸°ê¸°ID);
            // const í—ˆìš©ê¸°ê¸°ID = "010d9bbb-58ba-4f19-b12b-d0a7850d94bd";

            // if (ê¸°ê¸°ID !== í—ˆìš©ê¸°ê¸°ID) {
            //     ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "âŒ", "íšŒì›ê°€ì…ì´ ì œí•œëœ ìƒíƒœì…ë‹ˆë‹¤", "#ef4444");
            //     í™”ë©´í•´ì œ();
            //     return;
            // }

            const ì•„ì´ë””íŒ¨í„´ = /^[a-zA-Z0-9_]{3,12}$/;
            if (!ì•„ì´ë””íŒ¨í„´.test(ì•„ì´ë””)) {
                ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "âŒ", "ì•„ì´ë””ëŠ” ì˜ë¬¸/ìˆ«ì/ë°‘ì¤„ í¬í•¨ 3~12ìì—¬ì•¼ í•©ë‹ˆë‹¤", "#ef4444");
                í™”ë©´í•´ì œ();
                return;
            }

            try {
                const { data, error } = await supabase.auth.signUp({
                    email: ì´ë©”ì¼í˜•ì‹,
                    password: ë¹„ë²ˆ
                });

                if (error || !data.user) {
                    ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "âŒ", "íšŒì›ê°€ì… ì‹¤íŒ¨: " + error.message, "#ef4444");
                    í™”ë©´í•´ì œ();
                    return;
                }

                // âœ… ì„¸ì…˜ ì´ˆê¸°í™” í›„ ë¡œê·¸ì¸
                await supabase.auth.signOut();
                await supabase.auth.signInWithPassword({ email: ì´ë©”ì¼í˜•ì‹, password: ë¹„ë²ˆ });

                const { data: { user }, error: ë¡œê·¸ì¸ì˜¤ë¥˜ } = await supabase.auth.getUser();
                if (ë¡œê·¸ì¸ì˜¤ë¥˜ || !user) {
                    ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "âŒ", "ì¬ë¡œê·¸ì¸ ì‹¤íŒ¨", "#ef4444");
                    í™”ë©´í•´ì œ();
                    return;
                }

                const ìœ ì €UID = user.id;

                const ì‘ë‹µ = await fetch("/register-user", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ ìœ ì €UID, ìœ ì €ì•„ì´ë””, ê¸°ê¸°ID, ë¡œê·¸ì¸ì´ë©”ì¼: ì´ë©”ì¼í˜•ì‹ })
                });

                const ê²°ê³¼ = await ì‘ë‹µ.json();

                if (!ì‘ë‹µ.ok) {
                    ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "âŒ", ê²°ê³¼.ì˜¤ë¥˜ || "ì„œë²„ ì˜¤ë¥˜", "#ef4444");
                    í™”ë©´í•´ì œ();
                    return;
                }

                ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "âœ…", "íšŒì›ê°€ì… ì„±ê³µ! ìë™ ë¡œê·¸ì¸ ì™„ë£Œ", "#00c851");
                ìœ ì €ë°ì´í„° = ê²°ê³¼.ìœ ì €ë°ì´í„°;

                // âœ… DOMì´ ì™„ì „íˆ ì¤€ë¹„ëœ ì´í›„ ì•ˆì „í•˜ê²Œ í™”ë©´ í‘œì‹œ
                if (document.readyState === "complete" || document.readyState === "interactive") {
                    ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);
                } else {
                    document.addEventListener("DOMContentLoaded", () => {
                        ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);
                    });
                }

            } catch (e) {
                ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "âŒ", "ì˜ˆì™¸ ì˜¤ë¥˜ ë°œìƒ: " + e.message, "#ef4444");
            }

            í™”ë©´í•´ì œ();
        }

        async function ë¡œê·¸ì¸() {
            í™”ë©´ì ê¸ˆ();

            const ì•„ì´ë”” = document.getElementById("ì´ë©”ì¼ì…ë ¥").value.trim();
            const ë¹„ë²ˆ = document.getElementById("ë¹„ë²ˆì…ë ¥").value.trim();
            const ì´ë©”ì¼í˜•ì‹ = `${ì•„ì´ë””}@gagl.com`;

            if (!ì•„ì´ë”” || !ë¹„ë²ˆ) {
                ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "âš ï¸", "ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”", "#ef4444");
                í™”ë©´í•´ì œ();
                return;
            }

            try {
                const { error: ë¡œê·¸ì¸ì˜¤ë¥˜ } = await supabase.auth.signInWithPassword({
                    email: ì´ë©”ì¼í˜•ì‹,
                    password: ë¹„ë²ˆ
                });

                if (ë¡œê·¸ì¸ì˜¤ë¥˜) {
                    ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", "ë¡œê·¸ì¸ ì‹¤íŒ¨: " + ë¡œê·¸ì¸ì˜¤ë¥˜.message, "#ef4444");
                    í™”ë©´í•´ì œ();
                    return;
                }

                const { data: { user } } = await supabase.auth.getUser();
                if (!user || !user.id) {
                    ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", "ìœ ì € ì¸ì¦ ì •ë³´ ì—†ìŒ", "#ef4444");
                    í™”ë©´í•´ì œ();
                    return;
                }

                const { data: ìœ ì €ì •ë³´, error } = await supabase
                    .from("users")
                    .select("*")
                    .eq("ìœ ì €UID", user.id)
                    .single();

                if (error || !ìœ ì €ì •ë³´) {
                    ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "âš ï¸", "ìœ ì € ì •ë³´ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤", "#ef4444");
                    í™”ë©´í•´ì œ();
                    return;
                }

                ìœ ì €ë°ì´í„° = {
                    ...ìœ ì €ì •ë³´,
                    ìŠ¤í‚¬: ìœ ì €ì •ë³´.ìŠ¤í‚¬ || {},
                    ì¡°ìš°ê¸°ë¡: ìœ ì €ì •ë³´.ì¡°ìš°ê¸°ë¡ || { ì¼ë°˜: 0, ë ˆì–´: 0, ì‹ í™”: 0, ê³ ëŒ€: 0, íƒœì´ˆ: 0, ê³µí—ˆ: 0 },
                    í•©ì„±ê¸°ë¡: ìœ ì €ì •ë³´.í•©ì„±ê¸°ë¡ || {},
                    ì¥ë¹„ëª©ë¡: ìœ ì €ì •ë³´.ì¥ë¹„ëª©ë¡ || [],
                    ëª‡ë§ˆë¦¬ì£½ì˜€ë‚˜: ìœ ì €ì •ë³´.í‚¬ì¹´ìš´íŠ¸ || 0,
                    ê°•ë¦¼ëª¬ìŠ¤í„°: ìœ ì €ì •ë³´.ê°•ë¦¼ëª¬ìŠ¤í„° || null
                };

                ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "âœ…", "ë¡œê·¸ì¸ ì„±ê³µ!", "#00c851");
                ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);

            } catch (e) {
                ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", "ì˜¤ë¥˜ ë°œìƒ: " + e.message, "#ef4444");
            } finally {
                í™”ë©´í•´ì œ();
            }
        }

        async function íšŒì›íƒˆí‡´() {
            í™”ë©´ì ê¸ˆ();

            try {
                const {
                    data: { user }
                } = await supabase.auth.getUser();

                if (!user) {
                    ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", "ë¡œê·¸ì¸ ì •ë³´ ì—†ìŒ", "#ef4444");
                    return;
                }

                const ì‘ë‹µ = await fetch("/delete-user", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ ìœ ì €UID: user.id })
                });

                if (!ì‘ë‹µ.ok) {
                    console.warn("auth ì‚­ì œ ì‹¤íŒ¨", await ì‘ë‹µ.text());
                }

                ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "âœ…", "íƒˆí‡´ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.", "#00c851");

                await supabase.auth.signOut(); // ì„¸ì…˜ ì‚­ì œ
                localStorage.removeItem("ê¸°ê¸°ID"); // UUID ì‚­ì œ
                location.reload(); // ë¡œê·¸ì¸ í™”ë©´ìœ¼ë¡œ ìƒˆë¡œê³ ì¹¨

            } catch (e) {
                ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", "íƒˆí‡´ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: " + e.message, "#ef4444");
            } finally {
                í™”ë©´í•´ì œ();
            }
        }

        document.getElementById("ì „íˆ¬").addEventListener("click", () => {
            if (!ìœ ì €ë°ì´í„°) return;
            ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);
        });

        function ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €) {
            document.getElementById("ì—ë„ˆì§€ë°•ìŠ¤").style.display = "block";
            const ìµœëŒ€ = ìœ ì €.ìµœëŒ€ìŠ¤íƒœë¯¸ë„ˆ ?? 100;
            const í˜„ì¬ = ìœ ì €.í˜„ì¬ìŠ¤íƒœë¯¸ë„ˆ ?? 0;

            // âœ… ìŠ¤íƒœë¯¸ë„ˆ í…ìŠ¤íŠ¸ í‘œì‹œ
            const ìŠ¤íƒœë¯¸ë„ˆí‘œì‹œ = document.getElementById("ìŠ¤íƒœë¯¸ë„ˆí‘œì‹œ");
            if (ìŠ¤íƒœë¯¸ë„ˆí‘œì‹œ) ìŠ¤íƒœë¯¸ë„ˆí‘œì‹œ.innerText = `${í˜„ì¬}/${ìµœëŒ€}`;

            // âœ… ì—ë„ˆì§€ë°” ê¸¸ì´ ì¡°ì ˆ
            const ì—ë„ˆì§€ë°” = document.querySelector(".ì—ë„ˆì§€ë°”");
            if (ì—ë„ˆì§€ë°”) ì—ë„ˆì§€ë°”.style.width = `${(í˜„ì¬ / ìµœëŒ€) * 100}%`;

            document.getElementById("ë“±ê¸‰ì™¸í…Œë‘ë¦¬").style.border = "0.2px solid #4b4b4b";
            document.getElementById("ë ˆì–´ëª¬ìŠ¤í„°").style.display = "inline-block";

            document.getElementById("ë ˆì–´ëª¬ìŠ¤í„°").style.display = "none";
            document.getElementById("ì¸ì¦í™”ë©´").style.display = "none";
            document.getElementById("íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ").innerText = ìœ ì €.ìœ ì €ì•„ì´ë””;
            document.getElementById("ì „íˆ¬ìŠ¤í‚¬ì„¤ì •ë²„íŠ¼").style.display = "block";


            document.getElementById("ì „íˆ¬í™”ë©´").style.display = "block";
            document.getElementById("ì¥ë¹„í™”ë©´").style.display = "none";
            document.getElementById("ìŠ¤í‚¬í™”ë©´").style.display = "none";
            document.getElementById("ì „ë‹¹í™”ë©´").style.display = "none";
            document.getElementById("ë ˆì–´ëª¬ìŠ¤í„°").style.display = "none";

            // ìœ ì € ì •ë³´ í‘œì‹œ
            document.getElementById("ìœ ì €ì•„ì´ë””").innerText = ìœ ì €.ìœ ì €ì•„ì´ë”” || "ì•Œ ìˆ˜ ì—†ìŒ";
            document.getElementById("ìœ ì €ê³µê²©ë ¥").innerText = `ê³µê²©ë ¥ ${ìœ ì €.ê³µê²©ë ¥ || 10}`;
            document.getElementById("ìœ ì €ì²´ë ¥").innerText = `ì²´ë ¥ ${ìœ ì €.ë‚¨ì€ì²´ë ¥}/${ìœ ì €.ìµœëŒ€ì²´ë ¥}`;

            document.getElementById("ëª¬ìŠ¤í„°í…Œë‘ë¦¬ì•ˆí‘œì‹œ").style.display = "none";

            document.getElementById("ë ˆë²¨").innerText = `ë ˆë²¨ ${ìœ ì €.ë ˆë²¨ || 1}`;
            document.getElementById("ì´ê²½í—˜ì¹˜").innerText = ìœ ì €.ê²½í—˜ì¹˜?.toLocaleString() || "0";
            document.getElementById("ì´ê³¨ë“œ").innerText = (ìœ ì €.ê³¨ë“œ || 0).toLocaleString();
            document.getElementById("ì´ìˆ™ë ¨ë„").innerText = (ìœ ì €.ìˆ™ë ¨ë„ || 0).toLocaleString();

            document.getElementById("íšë“ê²½í—˜ì¹˜").innerText = "0";
            document.getElementById("íšë“ê³¨ë“œ").innerText = "0";
            document.getElementById("íšë“ìˆ™ë ¨ë„").innerText = "0";
            document.getElementById("ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸").innerText = "";

            // ê¸°ë³¸ê°’ ì„¤ì • (ì—†ì„ ìˆ˜ë„ ìˆìŒ)
            if (!ìœ ì €.í˜„ì¬ì¸µ) ìœ ì €.í˜„ì¬ì¸µ = 1;

            document.getElementById("í˜„ì¬ì¸µ").innerText = `${ìœ ì €.í˜„ì¬ì¸µ}ì¸µ`;
        }

        document.getElementById("ê³µê²©ë²„íŠ¼").addEventListener("click", async () => {
            if (!ìœ ì €ë°ì´í„°) return;

            í™”ë©´ì ê¸ˆ();
            let ë ˆì–´ëª¬ìŠ¤í„°ë“±ì¥ = false;

            try {
                const ì‘ë‹µ = await fetch("/attack", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ ìœ ì €ë°ì´í„° })
                });

                const ê²°ê³¼ = await ì‘ë‹µ.json();

                // âœ… ìŠ¤íƒœë¯¸ë„ˆ ë¶€ì¡± ì‹œ ì²˜ë¦¬
                if (ê²°ê³¼.ê²°ê³¼ === "ë¶ˆê°€") {
                    ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "âš ï¸", ê²°ê³¼.ë©”ì‹œì§€ || "ìŠ¤íƒœë¯¸ë„ˆ ë¶€ì¡±", "#ef4444");
                    í™”ë©´í•´ì œ();
                    return;
                }

                if (ê²°ê³¼.ê²°ê³¼ === "íŒ¨ë°°") {
                    const ëª¬ìŠ¤í„° = ê²°ê³¼.ëª¬ìŠ¤í„°;
                    ìœ ì €ë°ì´í„° = ê²°ê³¼.ìœ ì €ë°ì´í„°;

                    document.getElementById("ëª¬ìŠ¤í„°í…Œë‘ë¦¬ì•ˆí‘œì‹œ").style.display = "block";
                    document.getElementById("ì•…ë§ˆì´ë¦„").innerText = ëª¬ìŠ¤í„°.ì´ë¦„;
                    document.getElementById("ì•…ë§ˆì²´ë ¥").innerText = `ì²´ë ¥ ${ëª¬ìŠ¤í„°.ì²´ë ¥}`;
                    document.getElementById("ì•…ë§ˆë°©ì–´ë ¥").innerText = `ë°©ì–´ë ¥ ${ëª¬ìŠ¤í„°.ë°©ì–´ë ¥}`;

                    // document.getElementById("ë“±ê¸‰ì™¸í…Œë‘ë¦¬").style.border = `0.2px solid ${ìƒ‰ìƒë§µ[ëª¬ìŠ¤í„°.íƒ€ì…] || "#4b4b4b"}`;

                    document.getElementById("í˜„ì¬ì¸µ").innerText = `${ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ}ì¸µ`;

                    document.getElementById("íšë“ê²½í—˜ì¹˜").innerText = "0";
                    document.getElementById("íšë“ê³¨ë“œ").innerText = "0";
                    document.getElementById("íšë“ìˆ™ë ¨ë„").innerText = "0";
                    document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";
                    document.getElementById("íšë“ë¡œê·¸").innerText = "";
                    document.getElementById("ì¶”ê°€íšë“ë¡œê·¸").innerText = "";

                    document.getElementById("ìœ ì €ì²´ë ¥").innerText = `ì²´ë ¥ ${ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥}/${ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥}`;
                    document.getElementById("ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸").innerText = "íŒ¨ë°°";
                    document.getElementById("ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸").style.color = "#ef4444";
                } else {
                    const { ìœ ì €ë°ì´í„°: ìƒˆìœ ì €, ëª¬ìŠ¤í„°, ë³´ìƒ, ë ˆë²¨ì—…, íšŒë³µ } = ê²°ê³¼;
                    ìœ ì €ë°ì´í„° = ìƒˆìœ ì €;

                    document.getElementById("ëª¬ìŠ¤í„°í…Œë‘ë¦¬ì•ˆí‘œì‹œ").style.display = "block";
                    document.getElementById("ì•…ë§ˆì´ë¦„").innerText = ëª¬ìŠ¤í„°.ì´ë¦„;
                    document.getElementById("ì•…ë§ˆì²´ë ¥").innerText = `ì²´ë ¥ ${ëª¬ìŠ¤í„°.ì²´ë ¥}`;
                    document.getElementById("ì•…ë§ˆë°©ì–´ë ¥").innerText = `ë°©ì–´ë ¥ ${ëª¬ìŠ¤í„°.ë°©ì–´ë ¥}`;

                    // document.getElementById("ë“±ê¸‰ì™¸í…Œë‘ë¦¬").style.border = `0.2px solid ${ìƒ‰ìƒë§µ[ëª¬ìŠ¤í„°.íƒ€ì…] || "#4b4b4b"}`;
                    document.getElementById("í˜„ì¬ì¸µ").innerText = `${ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ}ì¸µ`;

                    document.getElementById("ì´ê²½í—˜ì¹˜").innerText = ìƒˆìœ ì €.ê²½í—˜ì¹˜.toLocaleString();
                    document.getElementById("ì´ê³¨ë“œ").innerText = ìƒˆìœ ì €.ê³¨ë“œ.toLocaleString();
                    document.getElementById("ì´ìˆ™ë ¨ë„").innerText = ìƒˆìœ ì €.ìˆ™ë ¨ë„.toLocaleString();
                    document.getElementById("íšë“ê²½í—˜ì¹˜").innerText = `+${ë³´ìƒ.ê²½í—˜ì¹˜}`;
                    document.getElementById("íšë“ê³¨ë“œ").innerText = `+${ë³´ìƒ.ê³¨ë“œ}`;
                    document.getElementById("íšë“ìˆ™ë ¨ë„").innerText = `+${ë³´ìƒ.ìˆ™ë ¨ë„}`;
                    document.getElementById("ë ˆë²¨").innerText = `ë ˆë²¨ ${ìƒˆìœ ì €.ë ˆë²¨}`;
                    document.getElementById("ìœ ì €ê³µê²©ë ¥").innerText = `ê³µê²©ë ¥ ${ìƒˆìœ ì €.ê³µê²©ë ¥}`;
                    document.getElementById("ìœ ì €ì²´ë ¥").innerText = `ì²´ë ¥ ${ìƒˆìœ ì €.ë‚¨ì€ì²´ë ¥}/${ìƒˆìœ ì €.ìµœëŒ€ì²´ë ¥}`;
                    document.getElementById("íšë“ë¡œê·¸").innerText =
                        `${ë³´ìƒ.ê²½í—˜ì¹˜} EXP, ${ë³´ìƒ.ê³¨ë“œ} Gold, ${ë³´ìƒ.ìˆ™ë ¨ë„} ìˆ™ë ¨ë„ íšë“`;
                    document.getElementById("ì¶”ê°€íšë“ë¡œê·¸").innerText = "";

                    if (ë ˆë²¨ì—….ì¦ê°€í•œë ˆë²¨ > 0) {
                        document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = `ë ˆë²¨ ${ìƒˆìœ ì €.ë ˆë²¨} ë‹¬ì„±!`;
                        document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").style.color = "#3f84ec";
                    } else document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";



                    document.getElementById("ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸").innerText = "ìŠ¹ë¦¬";
                    document.getElementById("ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸").style.color = "#00c851";
                }

                const ë ˆì–´ëª¬ìŠ¤í„° = document.getElementById("ë ˆì–´ëª¬ìŠ¤í„°");

                if (ê²°ê³¼.ë ˆì–´ëª¬ìŠ¤í„°ì´ë¦„) {
                    document.getElementById("ë“±ê¸‰ì™¸í…Œë‘ë¦¬").style.border = "0.2px solid #c653ff";
                    ë ˆì–´ëª¬ìŠ¤í„°.innerText = ê²°ê³¼.ë ˆì–´ëª¬ìŠ¤í„°ì´ë¦„;
                    ë ˆì–´ëª¬ìŠ¤í„°.style.display = "block";
                    ë ˆì–´ëª¬ìŠ¤í„°ë“±ì¥ = true;
                } else {
                    ë ˆì–´ëª¬ìŠ¤í„°.style.display = "none";
                    document.getElementById("ë“±ê¸‰ì™¸í…Œë‘ë¦¬").style.border = "0.2px solid #4b4b4b";
                }


                // âœ… ìœ ì €ë°ì´í„° ë³€ê²½ ì´í›„, ìŠ¹ë¦¬/íŒ¨ë°° ê´€ê³„ ì—†ì´ ì‹¤í–‰
                const ìŠ¤íƒœë¯¸ë„ˆí‘œì‹œ = document.getElementById("ìŠ¤íƒœë¯¸ë„ˆí‘œì‹œ");
                const ì—ë„ˆì§€ë°” = document.querySelector(".ì—ë„ˆì§€ë°”");
                if (ìŠ¤íƒœë¯¸ë„ˆí‘œì‹œ && ì—ë„ˆì§€ë°”) {
                    const ìµœëŒ€ = ìœ ì €ë°ì´í„°.ìµœëŒ€ìŠ¤íƒœë¯¸ë„ˆ ?? 100;
                    const í˜„ì¬ = ìœ ì €ë°ì´í„°.í˜„ì¬ìŠ¤íƒœë¯¸ë„ˆ ?? 0;
                    ìŠ¤íƒœë¯¸ë„ˆí‘œì‹œ.innerText = `${í˜„ì¬}/${ìµœëŒ€}`;
                    ì—ë„ˆì§€ë°”.style.width = `${(í˜„ì¬ / ìµœëŒ€) * 100}%`;
                }
            } catch (e) {
                ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", "ì „íˆ¬ ì¤‘ ì˜¤ë¥˜: " + e.message, "#ef4444");
            } finally {
                if (ë ˆì–´ëª¬ìŠ¤í„°ë“±ì¥) {
                    await new Promise(resolve => setTimeout(resolve, 1500)); // âœ… 1.5ì´ˆ ëŒ€ê¸°
                }
                í™”ë©´í•´ì œ();
            }

        });

        document.getElementById("ë ˆì–´ëª¬ìŠ¤í„°").addEventListener("click", async () => {
            if (!ìœ ì €ë°ì´í„°) return;

            const ì´ë¦„ = document.getElementById("ë ˆì–´ëª¬ìŠ¤í„°").innerText;
            í™”ë©´ì ê¸ˆ();
            let ë ˆì–´ëª¬ìŠ¤í„°ë“±ì¥ = false;

            try {
                const ì‘ë‹µ = await fetch("/attack", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ ìœ ì €ë°ì´í„°, ë ˆì–´ëª¬ìŠ¤í„°ì´ë¦„: ì´ë¦„ })
                });

                const ê²°ê³¼ = await ì‘ë‹µ.json();
                // âœ… ìŠ¤íƒœë¯¸ë„ˆ ë¶€ì¡± ì‹œ ì²˜ë¦¬
                if (ê²°ê³¼.ê²°ê³¼ === "ë¶ˆê°€") {
                    ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "âš ï¸", ê²°ê³¼.ë©”ì‹œì§€ || "ìŠ¤íƒœë¯¸ë„ˆ ë¶€ì¡±", "#ef4444");
                    í™”ë©´í•´ì œ();
                    return;
                }

                if (ê²°ê³¼.ê²°ê³¼ === "íŒ¨ë°°") {
                    const ëª¬ìŠ¤í„° = ê²°ê³¼.ëª¬ìŠ¤í„°;
                    ìœ ì €ë°ì´í„° = ê²°ê³¼.ìœ ì €ë°ì´í„°;

                    document.getElementById("ëª¬ìŠ¤í„°í…Œë‘ë¦¬ì•ˆí‘œì‹œ").style.display = "block";
                    document.getElementById("ì•…ë§ˆì´ë¦„").innerText = ëª¬ìŠ¤í„°.ì´ë¦„;
                    document.getElementById("ì•…ë§ˆì²´ë ¥").innerText = `ì²´ë ¥ ${ëª¬ìŠ¤í„°.ì²´ë ¥}`;
                    document.getElementById("ì•…ë§ˆë°©ì–´ë ¥").innerText = `ë°©ì–´ë ¥ ${ëª¬ìŠ¤í„°.ë°©ì–´ë ¥}`;

                    // document.getElementById("ë“±ê¸‰ì™¸í…Œë‘ë¦¬").style.border = `0.2px solid ${ìƒ‰ìƒë§µ[ëª¬ìŠ¤í„°.íƒ€ì…] || "#4b4b4b"}`;
                    document.getElementById("í˜„ì¬ì¸µ").innerText = `${ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ}ì¸µ`;

                    document.getElementById("íšë“ê²½í—˜ì¹˜").innerText = "0";
                    document.getElementById("íšë“ê³¨ë“œ").innerText = "0";
                    document.getElementById("íšë“ìˆ™ë ¨ë„").innerText = "0";
                    document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";
                    document.getElementById("íšë“ë¡œê·¸").innerText = "";
                    document.getElementById("ì¶”ê°€íšë“ë¡œê·¸").innerText = "";

                    document.getElementById("ìœ ì €ì²´ë ¥").innerText = `ì²´ë ¥ ${ìœ ì €ë°ì´í„°.ë‚¨ì€ì²´ë ¥}/${ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥}`;
                    document.getElementById("ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸").innerText = "íŒ¨ë°°";
                    document.getElementById("ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸").style.color = "#ef4444";
                } else {
                    const { ìœ ì €ë°ì´í„°: ìƒˆìœ ì €, ëª¬ìŠ¤í„°, ë³´ìƒ, ë ˆë²¨ì—…, íšŒë³µ } = ê²°ê³¼;
                    ìœ ì €ë°ì´í„° = ìƒˆìœ ì €;

                    document.getElementById("ëª¬ìŠ¤í„°í…Œë‘ë¦¬ì•ˆí‘œì‹œ").style.display = "block";
                    document.getElementById("ì•…ë§ˆì´ë¦„").innerText = ëª¬ìŠ¤í„°.ì´ë¦„;
                    document.getElementById("ì•…ë§ˆì²´ë ¥").innerText = `ì²´ë ¥ ${ëª¬ìŠ¤í„°.ì²´ë ¥}`;
                    document.getElementById("ì•…ë§ˆë°©ì–´ë ¥").innerText = `ë°©ì–´ë ¥ ${ëª¬ìŠ¤í„°.ë°©ì–´ë ¥}`;

                    // document.getElementById("ë“±ê¸‰ì™¸í…Œë‘ë¦¬").style.border = `0.2px solid ${ìƒ‰ìƒë§µ[ëª¬ìŠ¤í„°.íƒ€ì…] || "#4b4b4b"}`;
                    document.getElementById("í˜„ì¬ì¸µ").innerText = `${ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ}ì¸µ`;

                    document.getElementById("ì´ê²½í—˜ì¹˜").innerText = ìƒˆìœ ì €.ê²½í—˜ì¹˜.toLocaleString();
                    document.getElementById("ì´ê³¨ë“œ").innerText = ìƒˆìœ ì €.ê³¨ë“œ.toLocaleString();
                    document.getElementById("ì´ìˆ™ë ¨ë„").innerText = ìƒˆìœ ì €.ìˆ™ë ¨ë„.toLocaleString();
                    document.getElementById("íšë“ê²½í—˜ì¹˜").innerText = `+${ë³´ìƒ.ê²½í—˜ì¹˜}`;
                    document.getElementById("íšë“ê³¨ë“œ").innerText = `+${ë³´ìƒ.ê³¨ë“œ}`;
                    document.getElementById("íšë“ìˆ™ë ¨ë„").innerText = `+${ë³´ìƒ.ìˆ™ë ¨ë„}`;
                    document.getElementById("ë ˆë²¨").innerText = `ë ˆë²¨ ${ìƒˆìœ ì €.ë ˆë²¨}`;
                    document.getElementById("ìœ ì €ê³µê²©ë ¥").innerText = `ê³µê²©ë ¥ ${ìƒˆìœ ì €.ê³µê²©ë ¥}`;
                    document.getElementById("ìœ ì €ì²´ë ¥").innerText = `ì²´ë ¥ ${ìƒˆìœ ì €.ë‚¨ì€ì²´ë ¥}/${ìƒˆìœ ì €.ìµœëŒ€ì²´ë ¥}`;
                    document.getElementById("íšë“ë¡œê·¸").innerText =
                        `${ë³´ìƒ.ê²½í—˜ì¹˜} EXP, ${ë³´ìƒ.ê³¨ë“œ} Gold, ${ë³´ìƒ.ìˆ™ë ¨ë„} ìˆ™ë ¨ë„ íšë“`;
                    document.getElementById("ì¶”ê°€íšë“ë¡œê·¸").innerHTML =
                        (ê²°ê³¼.ì¶”ê°€ê³¨ë“œ > 0 ? `<span style="color: ${document.getElementById("ë³´ìœ ê³¨ë“œ")?.style.color || "#ffd700"};">ì¶”ê°€íšë“ +${ê²°ê³¼.ì¶”ê°€ê³¨ë“œ} Gold</span> ` : "") +
                        (ê²°ê³¼.ì¶”ê°€ìˆ™ë ¨ë„ > 0 ? `<span style="color: #3b82f6;">ì¶”ê°€íšë“ +${ê²°ê³¼.ì¶”ê°€ìˆ™ë ¨ë„} ìˆ™ë ¨ë„</span>` : "");

                    if (ë ˆë²¨ì—….ì¦ê°€í•œë ˆë²¨ > 0) {
                        document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = `ë ˆë²¨ ${ìƒˆìœ ì €.ë ˆë²¨} ë‹¬ì„±!`;
                        document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").style.color = "#3f84ec";
                    } else document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";


                    if (ê²°ê³¼.ë“œëì¥ë¹„) {
                        const ì¥ë¹„ = ê²°ê³¼.ë“œëì¥ë¹„;
                        const ë„¤ì˜¨ë°•ìŠ¤ = document.getElementById("ë„¤ì˜¨ë°•ìŠ¤");
                        if (ë„¤ì˜¨ë°•ìŠ¤) {
                            ë„¤ì˜¨ë°•ìŠ¤.innerText = `[${ì¥ë¹„.ë“±ê¸‰}] ${ì¥ë¹„.ì´ë¦„} +${ì¥ë¹„.ê³µê²©ë ¥} ë“œë!`;
                            ë„¤ì˜¨ë°•ìŠ¤.style.display = "block";
                        }
                    }
                    document.getElementById("ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸").innerText = "ìŠ¹ë¦¬";
                    document.getElementById("ìŠ¹ë¦¬íŒ¨ë°°ë¡œê·¸").style.color = "#00c851";
                }

                const ë ˆì–´ëª¬ìŠ¤í„° = document.getElementById("ë ˆì–´ëª¬ìŠ¤í„°");

                if (ê²°ê³¼.ë ˆì–´ëª¬ìŠ¤í„°ì´ë¦„) {
                    ë ˆì–´ëª¬ìŠ¤í„°.innerText = ê²°ê³¼.ë ˆì–´ëª¬ìŠ¤í„°ì´ë¦„;
                    ë ˆì–´ëª¬ìŠ¤í„°.style.display = "block";
                    ë ˆì–´ëª¬ìŠ¤í„°ë“±ì¥ = true;
                    document.getElementById("ë“±ê¸‰ì™¸í…Œë‘ë¦¬").style.border = "0.2px solid #c653ff";
                } else {
                    ë ˆì–´ëª¬ìŠ¤í„°.style.display = "none";
                    document.getElementById("ë“±ê¸‰ì™¸í…Œë‘ë¦¬").style.border = "0.2px solid #4b4b4b";
                }

                // âœ… ìœ ì €ë°ì´í„° ë³€ê²½ ì´í›„, ìŠ¹ë¦¬/íŒ¨ë°° ê´€ê³„ ì—†ì´ ì‹¤í–‰
                const ìŠ¤íƒœë¯¸ë„ˆí‘œì‹œ = document.getElementById("ìŠ¤íƒœë¯¸ë„ˆí‘œì‹œ");
                const ì—ë„ˆì§€ë°” = document.querySelector(".ì—ë„ˆì§€ë°”");
                if (ìŠ¤íƒœë¯¸ë„ˆí‘œì‹œ && ì—ë„ˆì§€ë°”) {
                    const ìµœëŒ€ = ìœ ì €ë°ì´í„°.ìµœëŒ€ìŠ¤íƒœë¯¸ë„ˆ ?? 100;
                    const í˜„ì¬ = ìœ ì €ë°ì´í„°.í˜„ì¬ìŠ¤íƒœë¯¸ë„ˆ ?? 0;
                    ìŠ¤íƒœë¯¸ë„ˆí‘œì‹œ.innerText = `${í˜„ì¬}/${ìµœëŒ€}`;
                    ì—ë„ˆì§€ë°”.style.width = `${(í˜„ì¬ / ìµœëŒ€) * 100}%`;
                }

            } catch (e) {
                ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", "ë ˆì–´ ì „íˆ¬ ì˜¤ë¥˜: " + e.message, "#ef4444");
            } finally {
                if (ë ˆì–´ëª¬ìŠ¤í„°ë“±ì¥) {
                    await new Promise(resolve => setTimeout(resolve, 1500)); // âœ… 1.5ì´ˆ ëŒ€ê¸°
                }
                í™”ë©´í•´ì œ();
            }

        });


        document.getElementById("ì¥ë¹„").addEventListener("click", () => {
            if (!ìœ ì €ë°ì´í„°) return;
            ì¥ë¹„í™”ë©´ë³´ì—¬ì£¼ê¸°();
        });

        function ì¥ë¹„í™”ë©´ë³´ì—¬ì£¼ê¸°() {
            document.getElementById("ì—ë„ˆì§€ë°•ìŠ¤").style.display = "none";

            document.getElementById("ì „íˆ¬í™”ë©´").style.display = "none";
            document.getElementById("ì¥ë¹„í™”ë©´").style.display = "block";
            document.getElementById("ìŠ¤í‚¬í™”ë©´").style.display = "none";
            document.getElementById("ì „ë‹¹í™”ë©´").style.display = "none";

            document.getElementById("íšë“ë¡œê·¸").innerText = "";
            document.getElementById("ì¶”ê°€íšë“ë¡œê·¸").innerText = "";
            document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";

            // ğŸ“Œ ì¡°ìš° ê¸°ë¡ í‘œì‹œ
            const ê¸°ë¡ = ìœ ì €ë°ì´í„°.ì¡°ìš°ê¸°ë¡ || { ë ˆì–´: 0, ì‹ í™”: 0, ê³ ëŒ€: 0, íƒœì´ˆ: 0, ê³µí—ˆ: 0 };
            document.getElementById("ì¥ë¹„ëª©ë¡").innerText =
                `ë ˆì–´:${ê¸°ë¡.ë ˆì–´} ì‹ í™”:${ê¸°ë¡.ì‹ í™”} ê³ ëŒ€:${ê¸°ë¡.ê³ ëŒ€} íƒœì´ˆ:${ê¸°ë¡.íƒœì´ˆ} ê³µí—ˆ:${ê¸°ë¡.ê³µí—ˆ}`;

            // ğŸ“Œ ê³¨ë“œ/ê³µê²©ë ¥/ì²´ë ¥ í‘œì‹œ
            document.getElementById("ì¥ë¹„ê³¨ë“œí‘œì‹œ").innerText =
                `ğŸ’° ${ìœ ì €ë°ì´í„°.ê³¨ë“œ.toLocaleString()} Gold | ğŸ—¡ ê³µê²©ë ¥ ${ìœ ì €ë°ì´í„°.ê³µê²©ë ¥} | â¤ï¸ ìµœëŒ€ì²´ë ¥ ${ìœ ì €ë°ì´í„°.ìµœëŒ€ì²´ë ¥}`;

            // ğŸ“Œ ì¥ë¹„ ì»¨í…Œì´ë„ˆ ì •ë¦¬
            const ì¥ë¹„ì»¨í…Œì´ë„ˆ = document.getElementById("ì¥ë¹„ì»¨í…Œì´ë„ˆ");
            ì¥ë¹„ì»¨í…Œì´ë„ˆ.innerHTML = "";

            const ì¥ë¹„ëª©ë¡ = ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡ || [];

            if (ì¥ë¹„ëª©ë¡.length === 0) {
                ì¥ë¹„ì»¨í…Œì´ë„ˆ.innerText = "íšë“í•œ ì¥ë¹„ê°€ ì—†ìŠµë‹ˆë‹¤.";
                return;
            }

            const ë“±ê¸‰ìš°ì„ ìˆœìœ„ = {
                "ë ˆì–´": 1,
                "ì‹ í™”": 2,
                "ê³ ëŒ€": 3,
                "íƒœì´ˆ": 4,
                "ê³µí—ˆ": 5
            };

            ì¥ë¹„ëª©ë¡.sort((a, b) => {
                const ìˆœì„œA = ë“±ê¸‰ìš°ì„ ìˆœìœ„[a.ë“±ê¸‰] || 999;
                const ìˆœì„œB = ë“±ê¸‰ìš°ì„ ìˆœìœ„[b.ë“±ê¸‰] || 999;
                return ìˆœì„œA - ìˆœì„œB;
            });

            // ğŸ“Œ ì¥ë¹„ ê°œë³„ ë Œë”ë§
            ì¥ë¹„ëª©ë¡.forEach(ì¥ë¹„ => {
                const ë°•ìŠ¤ = document.createElement("div");
                ë°•ìŠ¤.className = "ê¸°ë³¸í…Œë‘ë¦¬ ì–‘ìª½ì •ë ¬";
                ë°•ìŠ¤.style.border = `1px solid ${ìƒ‰ìƒë§µ[ì¥ë¹„.ë“±ê¸‰] || "#fff"}`;
                ë°•ìŠ¤.style.marginBottom = "8px";

                const í‚¤ = `${ì¥ë¹„.ì´ë¦„}|${ì¥ë¹„.ë“±ê¸‰}`;
                const í•©ì„±ìˆ˜ = ìœ ì €ë°ì´í„°.í•©ì„±ê¸°ë¡?.[í‚¤] ?? 0;
                const ê°•í™”í‘œì‹œ = ì¥ë¹„.ê°•í™” ? `+${ì¥ë¹„.ê°•í™”}` : "";
                const ì´ë¦„í‘œì‹œ = `${ì¥ë¹„.ì´ë¦„} (${í•©ì„±ìˆ˜}) ${ê°•í™”í‘œì‹œ}`;

                ë°•ìŠ¤.innerHTML = `
            <div>[${ì¥ë¹„.ë“±ê¸‰}] ${ì´ë¦„í‘œì‹œ}</div>
            <div>
                <svg onclick="ì¥ë¹„ê°•í™”('${ì¥ë¹„.ì´ë¦„}', '${ì¥ë¹„.ë“±ê¸‰}', this.closest('.ê¸°ë³¸í…Œë‘ë¦¬'))"
                    xmlns="http://www.w3.org/2000/svg"
                    width="16" height="16" viewBox="0 0 24 24" fill="none"
                    stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    style="cursor:pointer; margin-right: 4px;">
                    <path d="m15 12-8.373 8.373a1 1 0 1 1-3-3L12 9"/>
                    <path d="m18 15 4-4"/>
                    <path d="m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172V7l-2.26-2.26a6 6 0 0 0-4.202-1.756L9 2.96l.92.82A6.18 6.18 0 0 1 12 8.4V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5"/>
                </svg>
                ê³µê²©ë ¥ +${ì¥ë¹„.ê³µê²©ë ¥}
            </div>
        `;

                ì¥ë¹„ì»¨í…Œì´ë„ˆ.appendChild(ë°•ìŠ¤);
            });
        }

        async function ì¥ë¹„ê°•í™”(ì´ë¦„, ë“±ê¸‰, ë°•ìŠ¤) {
            // ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", "ì•…ë§ˆì„±ì˜ ëŒ€ì¥ì¥ì´ëŠ” ê³µí—ˆì— ê°‡í˜€ìˆìŠµë‹ˆë‹¤", "#ef4444");
            // return;
            if (!ìœ ì €ë°ì´í„° || !ìœ ì €ë°ì´í„°.ìœ ì €UID) return;

            const ê°•í™”ë¹„ìš© = {
                "ì¼ë°˜": 1000,
                "ë ˆì–´": 10000,
                "ì‹ í™”": 50000,
                "ê³ ëŒ€": 150000,
                "íƒœì´ˆ": 300000,
                "ê³µí—ˆ": 500000
            }[ë“±ê¸‰];

            const ë¹„ìš© = ê°•í™”ë¹„ìš©;  // ìˆ«ì ìœ ì§€

            if ((ìœ ì €ë°ì´í„°.ê³¨ë“œ || 0) < ë¹„ìš©) {
                ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", `ê³¨ë“œ ë¶€ì¡±: ${ë¹„ìš©.toLocaleString()} í•„ìš”`, "#ef4444");
                return;
            }

            const í™•ì¸ = confirm(`[${ë“±ê¸‰}] ì¥ë¹„ë¥¼ ${ë¹„ìš©} Goldë¡œ ê°•í™”í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`);
            if (!í™•ì¸) return;

            í™”ë©´ì ê¸ˆ();

            try {
                const ì‘ë‹µ = await fetch("/upgrade-item", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        ìœ ì €UID: ìœ ì €ë°ì´í„°.ìœ ì €UID,
                        ì´ë¦„,
                        ë“±ê¸‰
                    })
                });

                const ê²°ê³¼ = await ì‘ë‹µ.json();

                if (!ì‘ë‹µ.ok || ê²°ê³¼.ì˜¤ë¥˜) {
                    ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", ê²°ê³¼.ì˜¤ë¥˜ || "ê°•í™” ì‹¤íŒ¨..", "#ef4444");
                    return;
                }

                if (ê²°ê³¼.ì„±ê³µ) {
                    ë©”ì‹œì§€í‘œì‹œ(ë°•ìŠ¤, "âœ…", ê²°ê³¼.ë©”ì‹œì§€, "#00c851");

                    // âœ… ê°•í™” ìˆ˜ì¹˜ ë°˜ì˜
                    const ì¥ë¹„ = ìœ ì €ë°ì´í„°.ì¥ë¹„ëª©ë¡.find(j => j.ì´ë¦„ === ì´ë¦„ && j.ë“±ê¸‰ === ë“±ê¸‰);
                    if (ì¥ë¹„) {
                        ì¥ë¹„.ê°•í™” = ê²°ê³¼.ê°•í™”;               // âœ… ê°•í™” ìˆ˜ì¹˜ ë®ì–´ì“°ê¸°
                        ì¥ë¹„.ê³µê²©ë ¥ += ê²°ê³¼.ì¦ê°€ëŸ‰;         // âœ… ì¦ê°€ëŸ‰ì´ 0ì¼ ìˆ˜ë„ ìˆìŒ
                    }
                } else {
                    ë©”ì‹œì§€í‘œì‹œ(ë°•ìŠ¤, "", ê²°ê³¼.ë©”ì‹œì§€, "#ef4444");
                }

                ìœ ì €ë°ì´í„°.ê³µê²©ë ¥ = ê²°ê³¼.ê³µê²©ë ¥;
                ìœ ì €ë°ì´í„°.ê³¨ë“œ = ê²°ê³¼.ê³¨ë“œ;

                ì¥ë¹„í™”ë©´ë³´ì—¬ì£¼ê¸°();
            } catch (e) {
                ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", "ì˜¤ë¥˜: " + e.message, "#ef4444");
            } finally {
                í™”ë©´í•´ì œ();
            }
        }

        document.getElementById("ìŠ¤í‚¬").addEventListener("click", () => {
            if (!ìœ ì €ë°ì´í„°) return;
            ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
        });

        function ìŠ¤í‚¬ì •ë³´ë¶ˆëŸ¬ì˜¤ê¸°() {
            return {
                ë²„ì„œì»¤: {
                    ë‹¨ê³„: [
                        "ì•µê±° ë²„ì„œì»¤", "ë ˆì´ì§€ ë²„ì„œì»¤", "í”„ë Œì§€ ë²„ì„œì»¤", "ë§¤ë“œë‹ˆìŠ¤ ë²„ì„œì»¤",
                        "í•˜ìš¸ ë²„ì„œì»¤", "ìƒˆë¹„ì§€ ë²„ì„œì»¤", "ë¸”ëŸ¬ë“œ ë²„ì„œì»¤", "ì¹´ì˜¤ìŠ¤ ë²„ì„œì»¤",
                        "ë°ìŠ¤ ë²„ì„œì»¤", "ë£¨ë‚˜í‹± ë²„ì„œì»¤"
                    ],
                    ì„¤ëª…: [
                        "í„´ë‹¹ ì²´ë ¥-1, ë°ë¯¸ì§€ 1.4ë°°",
                        "í„´ë‹¹ ì²´ë ¥-2, ë°ë¯¸ì§€ 1.8ë°°",
                        "í„´ë‹¹ ì²´ë ¥-3, ë°ë¯¸ì§€ 2.2ë°°",
                        "í„´ë‹¹ ì²´ë ¥-4, ë°ë¯¸ì§€ 2.6ë°°",
                        "í„´ë‹¹ ì²´ë ¥-5, ë°ë¯¸ì§€ 3.0ë°°",
                        "í„´ë‹¹ ì²´ë ¥-6, ë°ë¯¸ì§€ 3.4ë°°",
                        "í„´ë‹¹ ì²´ë ¥-7, ë°ë¯¸ì§€ 3.8ë°°",
                        "í„´ë‹¹ ì²´ë ¥-8, ë°ë¯¸ì§€ 4.2ë°°",
                        "í„´ë‹¹ ì²´ë ¥-9, ë°ë¯¸ì§€ 4.6ë°°",
                        "í„´ë‹¹ ì²´ë ¥-10, ë°ë¯¸ì§€ 5.0ë°°"
                    ],
                    ì•„ì´ì½˜: () => `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${ìƒ‰ìƒë§µ["ë¹¨"]}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>`
                },
                ë“œë ˆì¸: {
                    ë‹¨ê³„: ["ê¸°ê°€ ë“œë ˆì¸", "í…Œë¼ ë“œë ˆì¸", "í˜íƒ€ ë“œë ˆì¸", "ì—‘ì‚¬ ë“œë ˆì¸", "ì œíƒ€ ë“œë ˆì¸", "ìš”íƒ€ ë“œë ˆì¸", "ë¡œë‚˜ ë“œë ˆì¸", "ì¿¼ì¹´ ë“œë ˆì¸"],
                    ì„¤ëª…: ["ì²˜ì¹˜ í›„ ì²´ë ¥íšŒë³µ + 1", "ì²˜ì¹˜ í›„ ì²´ë ¥íšŒë³µ + 2", "ì²˜ì¹˜ í›„ ì²´ë ¥íšŒë³µ + 3", "ì²˜ì¹˜ í›„ ì²´ë ¥íšŒë³µ + 4", "ì²˜ì¹˜ í›„ ì²´ë ¥íšŒë³µ + 5", "ì²˜ì¹˜ í›„ ì²´ë ¥íšŒë³µ + 6", "ì²˜ì¹˜ í›„ ì²´ë ¥íšŒë³µ + 7", "ì²˜ì¹˜ í›„ ì²´ë ¥íšŒë³µ + 8"],
                    ì•„ì´ì½˜: () => `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${ìƒ‰ìƒë§µ["ì£¼"]}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z"/></svg>`
                },
                ë°œêµ´: {
                    ë‹¨ê³„: ["ë£¨ë¹„ ë°œêµ´", "ì‚¬íŒŒì´ì–´ ë°œêµ´", "ì—ë©”ë„ë“œ ë°œêµ´", "ë‹¤ì´ì•„ëª¬ë“œ ë°œêµ´", "í† íŒŒì¦ˆ ë°œêµ´"],
                    ì„¤ëª…: ["ê³¨ë“œíšë“ 1.2ë°°", "ê³¨ë“œíšë“ 1.4ë°°", "ê³¨ë“œíšë“ 1.6ë°°", "ê³¨ë“œíšë“ 1.8ë°°", "ê³¨ë“œíšë“ 2.0ë°°"],
                    ì•„ì´ì½˜: () => `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${ìƒ‰ìƒë§µ["ë…¸"]}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 3h12l4 6-10 13L2 9Z"/><path d="M11 3 8 9l4 13 4-13-3-6"/><path d="M2 9h20"/></svg>`
                },
                ì•„ì´ì–¸ë°”ë””: {
                    ë‹¨ê³„: ["ìŠ¤í†¤ ì•„ì´ì–¸ë°”ë””", "ìŠ¤í‹¸ ì•„ì´ì–¸ë°”ë””", "í‹°íƒ„ ì•„ì´ì–¸ë°”ë””", "í”Œë ˆì´íŠ¸ ì•„ì´ì–¸ë°”ë””", "ë¯¸ìŠ¤ë¦´ ì•„ì´ì–¸ë°”ë””"],
                    ì„¤ëª…: ["ê³µê²©ì „ ì²´ë ¥íšŒë³µ + 1", "ê³µê²©ì „ ì²´ë ¥íšŒë³µ + 2", "ê³µê²©ì „ ì²´ë ¥íšŒë³µ + 3", "ê³µê²©ì „ ì²´ë ¥íšŒë³µ + 4", "ê³µê²©ì „ ì²´ë ¥íšŒë³µ + 5"],
                    ì•„ì´ì½˜: () => `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${ìƒ‰ìƒë§µ["ì´ˆ"]}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12.409 13.017A5 5 0 0 1 22 15c0 3.866-4 7-9 7-4.077 0-8.153-.82-10.371-2.462-.426-.316-.631-.832-.62-1.362C2.118 12.723 2.627 2 10 2a3 3 0 0 1 3 3 2 2 0 0 1-2 2c-1.105 0-1.64-.444-2-1"/><path d="M15 14a5 5 0 0 0-7.584 2"/><path d="M9.964 6.825C8.019 7.977 9.5 13 8 15"/></svg>`
                },
                ì¸ì‚¬ì´íŠ¸: {
                    ë‹¨ê³„: ["ë§ˆì´í¬ë¡œ ì¸ì‚¬ì´íŠ¸", "ë‚˜ë…¸ ì¸ì‚¬ì´íŠ¸"],
                    ì„¤ëª…: ["ìˆ™ë ¨ë„ + 1", "ìˆ™ë ¨ë„ + 2"],
                    ì•„ì´ì½˜: () => `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${ìƒ‰ìƒë§µ["íŒŒ"]}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 8v8"/><path d="M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41L13.7 2.71a2.41 2.41 0 0 0-3.41 0z"/><path d="M8 12h8"/></svg>`
                },
                í¬ë¦¬í‹°ì»¬: {
                    ë‹¨ê³„: [
                        "ì•ŒíŒŒ í¬ë¦¬í‹°ì»¬", "ë² íƒ€ í¬ë¦¬í‹°ì»¬", "ê°ë§ˆ í¬ë¦¬í‹°ì»¬",
                        "ë¸íƒ€ í¬ë¦¬í‹°ì»¬", "ì—¡ì‹¤ë¡  í¬ë¦¬í‹°ì»¬", "ì œíƒ€ í¬ë¦¬í‹°ì»¬",
                        "ì—íƒ€ í¬ë¦¬í‹°ì»¬", "ì„íƒ€ í¬ë¦¬í‹°ì»¬", "ìš”íƒ€ í¬ë¦¬í‹°ì»¬", "ì¹´íŒŒ í¬ë¦¬í‹°ì»¬",
                        "ëŒë‹¤ í¬ë¦¬í‹°ì»¬", "ë®¤ í¬ë¦¬í‹°ì»¬", "ë‰´ í¬ë¦¬í‹°ì»¬"
                    ],
                    ì„¤ëª…: [
                        "ìµœì¢…ë°ë¯¸ì§€ 1.2ë°°", "ìµœì¢…ë°ë¯¸ì§€ 1.4ë°°", "ìµœì¢…ë°ë¯¸ì§€ 1.6ë°°",
                        "ìµœì¢…ë°ë¯¸ì§€ 1.8ë°°", "ìµœì¢…ë°ë¯¸ì§€ 2.0ë°°", "ìµœì¢…ë°ë¯¸ì§€ 2.2ë°°",
                        "ìµœì¢…ë°ë¯¸ì§€ 2.4ë°°", "ìµœì¢…ë°ë¯¸ì§€ 2.6ë°°", "ìµœì¢…ë°ë¯¸ì§€ 2.8ë°°",
                        "ìµœì¢…ë°ë¯¸ì§€ 3.0ë°°", "ìµœì¢…ë°ë¯¸ì§€ 3.2ë°°", "ìµœì¢…ë°ë¯¸ì§€ 3.6ë°°", "ìµœì¢…ë°ë¯¸ì§€ 4.0ë°°"
                    ],
                    ì•„ì´ì½˜: () => `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${ìƒ‰ìƒë§µ["ë‚¨"]}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m14 12-8.5 8.5a2.12 2.12 0 1 1-3-3L11 9"/><path d="M15 13 9 7l4-4 6 6h3a8 8 0 0 1-7 7z"/></svg>`
                },
                ë²„ë‹: {
                    ë‹¨ê³„: ["ì¸í˜ë¥´ë…¸ ë²„ë‹", "í”Œë ˆì„ ë²„ë‹", "ë¸”ë ˆì´ì§• ë²„ë‹", "í—¬íŒŒì´ì–´ ë²„ë‹", "í”¼ë‹‰ìŠ¤ ë²„ë‹"],
                    ì„¤ëª…: ["ì²´ë ¥50%ì´í•˜ ë°ë¯¸ì§€1.6ë°°", "ì²´ë ¥50%ì´í•˜ ë°ë¯¸ì§€2.2ë°°", "ì²´ë ¥50%ì´í•˜ ë°ë¯¸ì§€2.8ë°°", "ì²´ë ¥50%ì´í•˜ ë°ë¯¸ì§€3.4ë°°", "ì²´ë ¥50%ì´í•˜ ë°ë¯¸ì§€4.0ë°°"],
                    ì•„ì´ì½˜: () => `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${ìƒ‰ìƒë§µ["ë³´"]}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 7h1a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2h-2"/><path d="M6 7H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h1"/><path d="m11 7-3 5h4l-3 5"/><line x1="22" x2="22" y1="11" y2="13"/></svg>`
                },
                ì¸í…”ë¦¬ì „ìŠ¤: {
                    ë‹¨ê³„: ["í´ë ˆì–´ ì¸í…”ë¦¬ì „ìŠ¤", "ì˜µì €ë¸Œ ì¸í…”ë¦¬ì „ìŠ¤"],
                    ì„¤ëª…: ["ê²½í—˜ì¹˜ +20%", "ê²½í—˜ì¹˜ +40%"],
                    ì•„ì´ì½˜: () => `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="${ìƒ‰ìƒë§µ["ë¹¨ì£¼"]}" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-copy-plus-icon lucide-copy-plus"><line x1="15" x2="15" y1="12" y2="18"/><line x1="12" x2="18" y1="15" y2="15"/><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>`
                },
            };
        }

        function ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°() {
            document.getElementById("ì—ë„ˆì§€ë°•ìŠ¤").style.display = "none";
            document.getElementById("ì „íˆ¬í™”ë©´").style.display = "none";
            document.getElementById("ì¥ë¹„í™”ë©´").style.display = "none";
            document.getElementById("ìŠ¤í‚¬í™”ë©´").style.display = "block";
            document.getElementById("ì „ë‹¹í™”ë©´").style.display = "none";

            document.getElementById("íšë“ë¡œê·¸").innerText = "";
            document.getElementById("ì¶”ê°€íšë“ë¡œê·¸").innerText = "";
            document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";
            document.getElementById("ë³´ìœ ìˆ™ë ¨ë„").innerText = "ë³´ìœ  ìˆ™ë ¨ë„ " + ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„;
            const ì´íˆ¬ì = Object.values(ìœ ì €ë°ì´í„°.ìŠ¤í‚¬ || {}).reduce((a, b) => a + b, 0);
            const ë‹¤ìŒí•„ìš”ìˆ™ë ¨ë„ = ì´íˆ¬ì + 1;
            document.getElementById("í•„ìš”ìˆ™ë ¨ë„").innerText = "í•„ìš”ìˆ™ë ¨ë„ " + ë‹¤ìŒí•„ìš”ìˆ™ë ¨ë„;

            const ì»¨í…Œì´ë„ˆ = document.getElementById("ìŠ¤í‚¬ì»¨í…Œì´ë„ˆ");
            ì»¨í…Œì´ë„ˆ.innerHTML = "";

            const ìŠ¤í‚¬ì •ë³´ = ìŠ¤í‚¬ì •ë³´ë¶ˆëŸ¬ì˜¤ê¸°();

            for (const í‚¤ in ìŠ¤í‚¬ì •ë³´) {
                const ì„¤ì • = ìŠ¤í‚¬ì •ë³´[í‚¤];
                const ì „ì²´ë ˆë²¨ = ìœ ì €ë°ì´í„°.ìŠ¤í‚¬?.[í‚¤] || 0;
                const ë‹¨ê³„ìˆ˜ = ì„¤ì •.ë‹¨ê³„.length;
                const ë‹¨ê³„ë‹¹ë ˆë²¨ = 10;
                const í˜„ì¬ë‹¨ê³„ = Math.min(Math.floor(ì „ì²´ë ˆë²¨ / ë‹¨ê³„ë‹¹ë ˆë²¨), ë‹¨ê³„ìˆ˜ - 1);

                let ë‹¨ê³„ë ˆë²¨ = ì „ì²´ë ˆë²¨ % ë‹¨ê³„ë‹¹ë ˆë²¨;
                if (ë‹¨ê³„ë ˆë²¨ === 0 && ì „ì²´ë ˆë²¨ > 0 && ì „ì²´ë ˆë²¨ % ë‹¨ê³„ë‹¹ë ˆë²¨ === 0) {
                    ë‹¨ê³„ë ˆë²¨ = ë‹¨ê³„ë‹¹ë ˆë²¨;
                }
                const ë°œë™í™•ë¥  = ë‹¨ê³„ë ˆë²¨ * 10;
                const ì•„ì´ì½˜ = ì„¤ì •.ì•„ì´ì½˜(); // ì´ ì¤„ í•„ìš”

                let ì´ë¦„, ì„¤ëª…, ë°œë™í‘œì‹œ;

                if (ì „ì²´ë ˆë²¨ >= ë‹¨ê³„ìˆ˜ * ë‹¨ê³„ë‹¹ë ˆë²¨) {
                    // ğŸ’ ìµœì¢…ë‹¨ê³„ê¹Œì§€ ë§ˆìŠ¤í„°í–ˆì„ ë•Œ (ì˜ˆ: ë‰´ í¬ë¦¬í‹°ì»¬ +10, í™•ë¥  100%)
                    ì´ë¦„ = ì„¤ì •.ë‹¨ê³„[ë‹¨ê³„ìˆ˜ - 1];
                    ì„¤ëª… = ì„¤ì •.ì„¤ëª…[ë‹¨ê³„ìˆ˜ - 1];
                    ë°œë™í‘œì‹œ = `<span style="color: #3b82f6;">ë°œë™í™•ë¥ (100%)</span>`;
                    ë‹¨ê³„ë ˆë²¨ = 10;
                } else if (ë‹¨ê³„ë ˆë²¨ === 10) {
                    ì´ë¦„ = ì„¤ì •.ë‹¨ê³„[í˜„ì¬ë‹¨ê³„];
                    ì„¤ëª… = ì„¤ì •.ì„¤ëª…[í˜„ì¬ë‹¨ê³„];
                    ë°œë™í‘œì‹œ = `<span style="color: #3b82f6;">ë°œë™í™•ë¥ (0%)</span>`;
                    ë‹¨ê³„ë ˆë²¨ = 0;
                } else {
                    // âš™ï¸ ì¼ë°˜ ìƒíƒœ
                    ì´ë¦„ = ì„¤ì •.ë‹¨ê³„[í˜„ì¬ë‹¨ê³„];
                    ì„¤ëª… = ì„¤ì •.ì„¤ëª…[í˜„ì¬ë‹¨ê³„];
                    ë°œë™í‘œì‹œ = `<span style="color: #3b82f6;">ë°œë™í™•ë¥ (${ë°œë™í™•ë¥ }%)</span>`;
                }

                const ì„¤ëª…í‘œì‹œ = `<div style="font-size: 12px; color: #888; margin-top: 2px;">${ì„¤ëª…} ${ë°œë™í‘œì‹œ}</div>`;

                const ì¤„ = document.createElement("div");
                ì¤„.className = "ì–‘ìª½ì •ë ¬ ê¸°ë³¸í…Œë‘ë¦¬";
                ì¤„.innerHTML = `
  <div>${ì•„ì´ì½˜} ${ì´ë¦„} +${ë‹¨ê³„ë ˆë²¨}${ì„¤ëª…í‘œì‹œ}</div>
  <div class="ê°€ë¡œì •ë ¬">
    <div class="ë²„íŠ¼">+</div>
    <div class="ë²„íŠ¼">-</div>
    <div class="ë²„íŠ¼">M</div>
    <div class="ë²„íŠ¼">R</div>
  </div>
`;
                ì»¨í…Œì´ë„ˆ.appendChild(ì¤„);

                ì¤„.style.position = "relative"; // â­ ì ˆëŒ€ ìœ„ì¹˜ë¥¼ ìœ„í•´ ì¶”ê°€

                // â­ ë§ˆìŠ¤í„°í•œ ë‹¨ê³„ ìˆ˜ ê³„ì‚°
                const ë§ˆìŠ¤í„°ë‹¨ê³„ìˆ˜ = Math.floor(ì „ì²´ë ˆë²¨ / ë‹¨ê³„ë‹¹ë ˆë²¨);

                // â­ ì•„ì´ì½˜ SVG ì •ì˜
                const ë£¨ì‹œë“œì•„ì´ì½˜SVG = `
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24"
fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
stroke-linejoin="round" class="lucide lucide-star-icon lucide-star"
style="margin-right: 2px;">
<path d="M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z"/>
</svg>`;

                if (ë§ˆìŠ¤í„°ë‹¨ê³„ìˆ˜ > 0) {
                    const ì•„ì´ì½˜ë°•ìŠ¤ = document.createElement("div");
                    ì•„ì´ì½˜ë°•ìŠ¤.style.position = "absolute";
                    ì•„ì´ì½˜ë°•ìŠ¤.style.top = "-10px";
                    ì•„ì´ì½˜ë°•ìŠ¤.style.left = "6px";
                    ì•„ì´ì½˜ë°•ìŠ¤.style.zIndex = "10";
                    ì•„ì´ì½˜ë°•ìŠ¤.style.display = "flex";

                    const í™©ê¸ˆìƒ‰ = "#facc15";
                    const ì „ë¶€ë§ˆìŠ¤í„° = ë§ˆìŠ¤í„°ë‹¨ê³„ìˆ˜ === ë‹¨ê³„ìˆ˜;

                    for (let i = 0; i < ë§ˆìŠ¤í„°ë‹¨ê³„ìˆ˜; i++) {
                        const ì•„ì´ì½˜ = document.createElement("div");
                        ì•„ì´ì½˜.innerHTML = ë£¨ì‹œë“œì•„ì´ì½˜SVG;
                        if (ì „ë¶€ë§ˆìŠ¤í„°) {
                            ì•„ì´ì½˜.style.color = í™©ê¸ˆìƒ‰; // â­ ì „ë¶€ ë§ˆìŠ¤í„° ì‹œ í™©ê¸ˆìƒ‰
                        }
                        ì•„ì´ì½˜ë°•ìŠ¤.appendChild(ì•„ì´ì½˜);
                    }

                    ì¤„.appendChild(ì•„ì´ì½˜ë°•ìŠ¤);
                }

                ì¤„.querySelectorAll(".ë²„íŠ¼").forEach(ë²„íŠ¼ => {
                    ë²„íŠ¼.addEventListener("click", async () => {
                        const í–‰ë™ë§µ = {
                            "+": "íˆ¬ì",
                            "-": "íšŒìˆ˜",
                            "M": "ë§ˆìŠ¤í„°",
                            "R": "ì´ˆê¸°í™”"
                        };

                        const í–‰ë™ = í–‰ë™ë§µ[ë²„íŠ¼.innerText];
                        if (!í–‰ë™) return;

                        í™”ë©´ì ê¸ˆ();
                        try {
                            const ì‘ë‹µ = await fetch("/update-skill", {
                                method: "POST",
                                headers: { "Content-Type": "application/json" },
                                body: JSON.stringify({
                                    ìœ ì €UID: ìœ ì €ë°ì´í„°.ìœ ì €UID,
                                    ìŠ¤í‚¬ì´ë¦„: í‚¤,
                                    í–‰ë™
                                })
                            });

                            const ê²°ê³¼ = await ì‘ë‹µ.json();

                            if (!ì‘ë‹µ.ok || ê²°ê³¼.ì˜¤ë¥˜) {
                                ë©”ì‹œì§€í‘œì‹œ(ìŠ¤í‚¬í™”ë©´, "", ê²°ê³¼.ì˜¤ë¥˜ || "ì‹¤íŒ¨", "#ef4444");
                                return;
                            }

                            ìœ ì €ë°ì´í„°.ìŠ¤í‚¬ = ê²°ê³¼.ìŠ¤í‚¬;
                            ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ = ê²°ê³¼.ìˆ™ë ¨ë„;
                            ë©”ì‹œì§€í‘œì‹œ(ìŠ¤í‚¬í™”ë©´, "âœ…", `${í–‰ë™} ì™„ë£Œ`, "#00c851");

                            ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
                        } catch (e) {
                            ë©”ì‹œì§€í‘œì‹œ(ìŠ¤í‚¬í™”ë©´, "", "ì„œë²„ ì˜¤ë¥˜: " + e.message, "#ef4444");
                        } finally {
                            í™”ë©´í•´ì œ();
                        }
                    });
                });
            }
        }

        document.getElementById("ë³´ìœ ìˆ™ë ¨ë„").addEventListener("click", async () => {
            í™”ë©´ì ê¸ˆ();

            try {
                const ì‘ë‹µ = await fetch("/update-skill", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        ìœ ì €UID: ìœ ì €ë°ì´í„°.ìœ ì €UID,
                        ìŠ¤í‚¬ì´ë¦„: "ì „ì²´", // íŠ¹ë³„ í‚¤ì›Œë“œ
                        í–‰ë™: "ì´ˆê¸°í™”"
                    })
                });

                const ê²°ê³¼ = await ì‘ë‹µ.json();

                if (!ì‘ë‹µ.ok || ê²°ê³¼.ì˜¤ë¥˜) {
                    ë©”ì‹œì§€í‘œì‹œ(ìŠ¤í‚¬í™”ë©´, "", ê²°ê³¼.ì˜¤ë¥˜ || "ì´ˆê¸°í™” ì‹¤íŒ¨", "#ef4444");
                    return;
                }

                ìœ ì €ë°ì´í„°.ìˆ™ë ¨ë„ = ê²°ê³¼.ìˆ™ë ¨ë„;
                ìœ ì €ë°ì´í„°.ìŠ¤í‚¬ = ê²°ê³¼.ìŠ¤í‚¬;

                ë©”ì‹œì§€í‘œì‹œ(ìŠ¤í‚¬í™”ë©´, "ğŸ”", "ëª¨ë“  ìŠ¤í‚¬ ì´ˆê¸°í™” ì™„ë£Œ", "#3b82f6");
                ìŠ¤í‚¬í™”ë©´ë³´ì—¬ì£¼ê¸°();
            } catch (e) {
                ë©”ì‹œì§€í‘œì‹œ(ìŠ¤í‚¬í™”ë©´, "", "ì„œë²„ ì˜¤ë¥˜: " + e.message, "#ef4444");
            } finally {
                í™”ë©´í•´ì œ();
            }
        });

        document.getElementById("ì „ë‹¹").addEventListener("click", () => {
            if (!ìœ ì €ë°ì´í„°) return;
            ì „ë‹¹í™”ë©´ë³´ì—¬ì£¼ê¸°();
        });

        async function ì „ë‹¹í™”ë©´ë³´ì—¬ì£¼ê¸°() {
            í™”ë©´ì ê¸ˆ();
            document.getElementById("ì „íˆ¬í™”ë©´").style.display = "none";
            document.getElementById("ì—ë„ˆì§€ë°•ìŠ¤").style.display = "none";
            document.getElementById("ì „ë‹¹í™”ë©´").style.display = "block";
            document.getElementById("ìŠ¤í‚¬í™”ë©´").style.display = "none";
            document.getElementById("ì¥ë¹„í™”ë©´").style.display = "none";
            document.getElementById("íšë“ë¡œê·¸").innerText = "";
            document.getElementById("ì¶”ê°€íšë“ë¡œê·¸").innerText = "";
            document.getElementById("ë ˆë²¨ì—…í‘œì‹œ").innerText = "";

            const ì»¨í…Œì´ë„ˆ = document.getElementById("ì „ë‹¹ì»¨í…Œì´ë„ˆ");
            ì»¨í…Œì´ë„ˆ.innerHTML = "";

            const ì‘ë‹µ = await fetch("/ranking", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ ìœ ì €UID: ìœ ì €ë°ì´í„°.ìœ ì €UID })
            });

            const ê²°ê³¼ = await ì‘ë‹µ.json(); // âœ… ì´ ì¤„ì´ í•„ìš”í•©ë‹ˆë‹¤!
            const ìœ ì €ë“¤ = ê²°ê³¼.ìœ ì €ë“¤ || [];
            const ë‚´ìˆœìœ„ = ê²°ê³¼.ë‚´ìˆœìœ„;

            ìœ ì €ë“¤.forEach((ìœ ì €, index) => {
                const ì¤„ = document.createElement("div");
                ì¤„.className = "ì–‘ìª½ì •ë ¬ ë°‘ì¤„";
                if (ìœ ì €.ìœ ì €ì•„ì´ë”” === ìœ ì €ë°ì´í„°.ìœ ì €ì•„ì´ë””) ì¤„.classList.add("ë‚´ì•„ì´ë””ê°•ì¡°");

                let ì™¼ìª½í‘œì‹œ;
                if (index === 0) {
                    ì™¼ìª½í‘œì‹œ = `<svg class="lucide lucide-crown" style="color: gold;" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"/><path d="M5 21h14"/></svg>`;
                } else if (index === 1) {
                    ì™¼ìª½í‘œì‹œ = `<svg class="lucide lucide-crown" style="color: silver;" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"/><path d="M5 21h14"/></svg>`;
                } else if (index === 2) {
                    ì™¼ìª½í‘œì‹œ = `<svg class="lucide lucide-crown" style="color: peru;" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"/><path d="M5 21h14"/></svg>`;
                } else {
                    ì™¼ìª½í‘œì‹œ = `<span style="width:24px; display:inline-block;">${index + 1}</span>`;
                }

                ì¤„.innerHTML = `
            <div class="ê°€ë¡œì •ë ¬">${ì™¼ìª½í‘œì‹œ}</div>
            <div>${ìœ ì €.ìœ ì €ì•„ì´ë””} (lv.${ìœ ì €.ë ˆë²¨ || 1}) - ê³µê²©ë ¥ ${ìœ ì €.ê³µê²©ë ¥} / ${ìœ ì €.í˜„ì¬ì¸µ}ì¸µ</div>
        `;

                ì¤„.addEventListener("click", (e) => {
                    e.stopPropagation(); // âœ… documentë¡œ ì´ë²¤íŠ¸ í¼ì§€ëŠ” ê²ƒ ì°¨ë‹¨

                    console.log("âœ… ìœ ì € í´ë¦­ë¨:", ìœ ì €);
                    const ì°½ = document.getElementById("ë¯¸ë‹ˆì¥ë¹„ì°½");
                    ì°½.style.display = "block";
                    ì°½.innerHTML = `<div style="font-weight:bold; margin-bottom:8px;">ğŸ” ${ìœ ì €.ìœ ì €ì•„ì´ë””} ì¥ë¹„</div>`;

                    const ì¥ë¹„ë“¤ = ìœ ì €.ì¥ë¹„ëª©ë¡ || [];
                    const ê¸°ë¡ = ìœ ì €.í•©ì„±ê¸°ë¡ || {};

                    if (ì¥ë¹„ë“¤.length === 0) {
                        ì°½.innerHTML += "ì¥ë¹„ ì—†ìŒ";
                        return;
                    }

                    // âœ… ë“±ê¸‰ ìˆœ ì •ë ¬
                    const ë“±ê¸‰ìˆœì„œ = {
                        "ë ˆì–´": 1,
                        "ì‹ í™”": 2,
                        "ê³ ëŒ€": 3,
                        "íƒœì´ˆ": 4,
                        "ê³µí—ˆ": 5
                    };

                    ì¥ë¹„ë“¤.sort((a, b) => {
                        const ìˆœì„œA = ë“±ê¸‰ìˆœì„œ[a.ë“±ê¸‰] ?? 99;
                        const ìˆœì„œB = ë“±ê¸‰ìˆœì„œ[b.ë“±ê¸‰] ?? 99;
                        return ìˆœì„œA - ìˆœì„œB;
                    });

                    for (const ì¥ë¹„ of ì¥ë¹„ë“¤) {
                        const í‚¤ = `${ì¥ë¹„.ì´ë¦„}|${ì¥ë¹„.ë“±ê¸‰}`;
                        const í•©ì„±ìˆ˜ = ê¸°ë¡[í‚¤] ?? 0;
                        const ê°•í™”í‘œì‹œ = ì¥ë¹„.ê°•í™” ? ` +${ì¥ë¹„.ê°•í™”}` : "";
                        const ì´ë¦„í‘œì‹œ = `${ì¥ë¹„.ì´ë¦„} (${í•©ì„±ìˆ˜})${ê°•í™”í‘œì‹œ}`;

                        const ë°•ìŠ¤ = document.createElement("div");
                        ë°•ìŠ¤.className = "ê¸°ë³¸í…Œë‘ë¦¬";
                        ë°•ìŠ¤.style.marginBottom = "6px";
                        ë°•ìŠ¤.style.border = `1px solid ${ìƒ‰ìƒë§µ[ì¥ë¹„.ë“±ê¸‰] || "#ccc"}`;
                        ë°•ìŠ¤.innerHTML = `[${ì¥ë¹„.ë“±ê¸‰}] ${ì´ë¦„í‘œì‹œ} - ğŸ—¡ ${ì¥ë¹„.ê³µê²©ë ¥}`;
                        ì°½.appendChild(ë°•ìŠ¤);
                    }
                });

                ì»¨í…Œì´ë„ˆ.appendChild(ì¤„);
            });

            if (typeof ë‚´ìˆœìœ„ === "number" && ë‚´ìˆœìœ„ >= 10) {
                const ì¤„ = document.createElement("div");
                ì¤„.className = "ì–‘ìª½ì •ë ¬ ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬ ë‚´ì•„ì´ë””ê°•ì¡°";
                ì¤„.innerHTML = `
        <div class="ê°€ë¡œì •ë ¬">${ë‚´ìˆœìœ„ + 1}</div>
        <div>${ìœ ì €ë°ì´í„°.ìœ ì €ì•„ì´ë””} (lv.${ìœ ì €ë°ì´í„°.ë ˆë²¨ || 1}) - ê³µê²©ë ¥ ${ìœ ì €ë°ì´í„°.ê³µê²©ë ¥} / ${ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ}ì¸µ</div>
    `;
                ì»¨í…Œì´ë„ˆ.appendChild(ì¤„);
            }

            í™”ë©´í•´ì œ();
        }

        // âœ… ì¥ë¹„ì°½ ë‚´ë¶€ í´ë¦­ ì‹œ documentì— ì´ë²¤íŠ¸ ì•ˆ í¼ì§€ë„ë¡ ë§‰ê¸°
        document.getElementById("ë¯¸ë‹ˆì¥ë¹„ì°½").addEventListener("click", (e) => {
            e.stopPropagation();
        });

        // âœ… ì¥ë¹„ì°½ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        document.addEventListener("click", (e) => {
            const ì°½ = document.getElementById("ë¯¸ë‹ˆì¥ë¹„ì°½");

            if (ì°½.style.display !== "block") return;

            if (!ì°½.contains(e.target)) {
                ì°½.style.display = "none";
            }
        });

        document.getElementById("íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ").addEventListener("click", async function ì•„ì´ë””ë³€ê²½ì‹œì‘() {
            if (!ìœ ì €ë°ì´í„°) return;

            const ê¸°ì¡´í‘œì‹œ = document.getElementById("íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ");
            const ì›ë˜ì•„ì´ë”” = ìœ ì €ë°ì´í„°.ìœ ì €ì•„ì´ë””;

            // ì…ë ¥ì°½ ìƒì„±
            const ì…ë ¥ì°½ = document.createElement("input");
            ì…ë ¥ì°½.type = "text";
            ì…ë ¥ì°½.maxLength = 8;
            ì…ë ¥ì°½.placeholder = "ìƒˆ ì•„ì´ë”” ì…ë ¥";
            ì…ë ¥ì°½.style.background = "white";
            ì…ë ¥ì°½.style.color = "black";
            ì…ë ¥ì°½.style.border = "none";
            ì…ë ¥ì°½.style.fontSize = "14px";
            ì…ë ¥ì°½.size = 8;
            ì…ë ¥ì°½.style.outline = "none";
            ì…ë ¥ì°½.value = "";
            ê¸°ì¡´í‘œì‹œ.replaceWith(ì…ë ¥ì°½);
            ì…ë ¥ì°½.focus();

            // ì™¸ë¶€ í´ë¦­ ê°ì§€ í•¸ë“¤ëŸ¬
            const ì™¸ë¶€í´ë¦­ì·¨ì†Œ = (e) => {
                if (!ì…ë ¥ì°½.contains(e.target)) {
                    const ë³µì› = document.createElement("div");
                    ë³µì›.id = "íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ";
                    ë³µì›.className = "ì»¤ì„œí˜¸ë²„";
                    ë³µì›.innerText = ì›ë˜ì•„ì´ë””;
                    ì…ë ¥ì°½.replaceWith(ë³µì›);
                    ë³µì›.addEventListener("click", ì•„ì´ë””ë³€ê²½ì‹œì‘);
                    document.removeEventListener("click", ì™¸ë¶€í´ë¦­ì·¨ì†Œ);
                }
            };

            // ì…ë ¥ì°½ í´ë¦­ ì œì™¸í•˜ê³  ë°”ê¹¥ í´ë¦­ ì‹œ ì·¨ì†Œ
            setTimeout(() => {
                document.addEventListener("click", ì™¸ë¶€í´ë¦­ì·¨ì†Œ);
            }, 0);

            ì…ë ¥ì°½.addEventListener("keydown", async (e) => {
                if (e.key !== "Enter") return;

                const ìƒˆì•„ì´ë”” = ì…ë ¥ì°½.value.trim();
                if (!ìƒˆì•„ì´ë”” || ìƒˆì•„ì´ë””.length > 8) {
                    ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "âš ï¸", "1~8ì ì´ë‚´ë¡œ ì…ë ¥í•˜ì„¸ìš”", "#ef4444");
                    return;
                }

                í™”ë©´ì ê¸ˆ();

                try {
                    const ì‘ë‹µ = await fetch("/update-username", {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({
                            ìœ ì €UID: ìœ ì €ë°ì´í„°.ìœ ì €UID,
                            ìƒˆì•„ì´ë””
                        })
                    });

                    const ê²°ê³¼ = await ì‘ë‹µ.json();

                    if (!ì‘ë‹µ.ok) {
                        ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", ê²°ê³¼.ì˜¤ë¥˜ || "ì•„ì´ë”” ë³€ê²½ ì‹¤íŒ¨", "#ef4444");
                        í™”ë©´í•´ì œ();
                        return;
                    }

                    ìœ ì €ë°ì´í„°.ìœ ì €ì•„ì´ë”” = ìƒˆì•„ì´ë””;

                    const ë³µì› = document.createElement("div");
                    ë³µì›.id = "íƒ€ì´í‹€ì„ì•„ì´ë””ë¡œ";
                    ë³µì›.className = "ì»¤ì„œí˜¸ë²„";
                    ë³µì›.innerText = ìƒˆì•„ì´ë””;
                    ì…ë ¥ì°½.replaceWith(ë³µì›);
                    ë³µì›.addEventListener("click", ì•„ì´ë””ë³€ê²½ì‹œì‘);

                    document.getElementById("ìœ ì €ì•„ì´ë””").innerText = ìƒˆì•„ì´ë””;
                    ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "âœ…", "ì•„ì´ë”” ë³€ê²½ ì™„ë£Œ", "#00c851");

                    document.removeEventListener("click", ì™¸ë¶€í´ë¦­ì·¨ì†Œ);
                } catch (e) {
                    ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", "ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜", "#ef4444");
                } finally {
                    í™”ë©´í•´ì œ();
                }
            });
        });

        // ğŸŸ¡ ë¬´ì§€ê°œ íƒ€ì´í‹€ ì• ë‹ˆë©”ì´ì…˜
        let ìƒ‰ìƒì¸ë±ìŠ¤ = 0;
        const ë¬´ì§€ê°œìƒ‰ë“¤ = ["#ff0000", "#ff7f00", "#ffff00", "#00ff00", "#0000ff", "#4b0082", "#9400d3"];
        setInterval(() => {
            const íƒ€ì´í‹€ = document.getElementById("ë„ë°•íƒ€ì´í‹€");
            // íƒ€ì´í‹€.style.display = "flex";
            // íƒ€ì´í‹€.style.alignItems = "center";
            // íƒ€ì´í‹€.style.gap = "6px";
            íƒ€ì´í‹€.innerHTML = `${ë„ë°•ì•„ì´ì½˜} ë„ë°•ì¥`;
            if (íƒ€ì´í‹€) {
                íƒ€ì´í‹€.style.color = ë¬´ì§€ê°œìƒ‰ë“¤[ìƒ‰ìƒì¸ë±ìŠ¤ % ë¬´ì§€ê°œìƒ‰ë“¤.length];
                ìƒ‰ìƒì¸ë±ìŠ¤++;
            }
        }, 250);

        // ğŸŸ¢ ë„ë°•ì°½ ì™¸ë¶€ í´ë¦­ ì‹œ ë‹«ê¸°
        document.addEventListener("click", (e) => {
            const ë„ë°•ì°½ = document.getElementById("ë„ë°•ì°½");
            if (ë„ë°•ì°½.style.display === "none") return;
            if (!ë„ë°•ì°½.contains(e.target) && e.target.id !== "ì´ê³¨ë“œ") {
                ë„ë°•ì°½.style.display = "none";
            }
        });

        // // ğŸŸ¢ ì´ê³¨ë“œ í´ë¦­ ì‹œ ë„ë°•ì°½ í‘œì‹œ
        // document.getElementById("ì´ê³¨ë“œ").addEventListener("click", () => {
        //     if (!ìœ ì €ë°ì´í„°) return;
        //     const ë„ë°•ì°½ = document.getElementById("ë„ë°•ì°½");
        //     ë„ë°•ì°½.style.display = "block";
        // });

        // ğŸŸ¡ ë„ë°• ì‹œë„
        async function ë„ë°•ì‹œë„(ë“±ê¸‰) {
            const ë¹„ìš©ë§µ = {
                "ë ˆì–´": 100000,
                "ì‹ í™”": 300000,
                "ê³ ëŒ€": 1000000,
                "íƒœì´ˆ": 10000000,
                "ê³µí—ˆ": 100000000,
            };

            const ë¹„ìš© = ë¹„ìš©ë§µ[ë“±ê¸‰];
            if (ìœ ì €ë°ì´í„°.ê³¨ë“œ < ë¹„ìš©) {
                ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", "ê³¨ë“œ ë¶€ì¡±!", "#ef4444");
                return;
            }

            const í™•ì¸ = confirm(`[${ë“±ê¸‰}] ì¥ë¹„ ë„ë°•ì„ ${ë¹„ìš©.toLocaleString()} ê³¨ë“œë¡œ ì§„í–‰í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`);
            if (!í™•ì¸) return;

            í™”ë©´ì ê¸ˆ();
            try {
                const ì‘ë‹µ = await fetch("/gamble", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({
                        ìœ ì €UID: ìœ ì €ë°ì´í„°.ìœ ì €UID,
                        ë“±ê¸‰
                    })
                });

                const ê²°ê³¼ = await ì‘ë‹µ.json();
                if (!ì‘ë‹µ.ok || ê²°ê³¼.ì˜¤ë¥˜) {
                    ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", ê²°ê³¼.ì˜¤ë¥˜ || "ë„ë°• ì‹¤íŒ¨", "#ef4444");
                    return;
                }

                ìœ ì €ë°ì´í„° = ê²°ê³¼.ìœ ì €ë°ì´í„°;
                if (ê²°ê³¼.ê²°ê³¼ === "ì„±ê³µ" && ê²°ê³¼.ì¥ë¹„) {
                    ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", `[${ê²°ê³¼.ì¥ë¹„.ë“±ê¸‰}] ${ê²°ê³¼.ì¥ë¹„.ì´ë¦„} +${ê²°ê³¼.ì¥ë¹„.ê³µê²©ë ¥} íšë“!`, ìƒ‰ìƒë§µ[ê²°ê³¼.ì¥ë¹„.ë“±ê¸‰]);
                } else if (ê²°ê³¼.ê²°ê³¼ === "ì‹¤íŒ¨") {
                    ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", "ë„ë°•ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤!", "#ef4444");
                }

                document.getElementById("ì´ê³¨ë“œ").innerText = ìœ ì €ë°ì´í„°.ê³¨ë“œ.toLocaleString();
            } catch (e) {
                ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", "ë„ë°• ì¤‘ ì˜¤ë¥˜: " + e.message, "#ef4444");
            } finally {
                í™”ë©´í•´ì œ();
            }
        }


        document.getElementById("ì•„ë˜ì¸µìœ¼ë¡œ").addEventListener("click", async () => {
            if (!ìœ ì €ë°ì´í„°) return;
            if (ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ <= 1) return ë©”ì‹œì§€í‘œì‹œ(ì¸µì¡°ì ˆ, "", "ì§€í•˜ë¡œ ë‚´ë ¤ê°ˆ ìˆ˜ ì—†ìŠµë‹ˆë‹¤", "#ef4444");

            ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ--;
            document.getElementById("í˜„ì¬ì¸µ").innerText = `${ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ}ì¸µ`;
        });

        document.getElementById("ìœ„ì¸µìœ¼ë¡œ").addEventListener("click", async () => {
            if (!ìœ ì €ë°ì´í„°) return;

            ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ++;
            document.getElementById("í˜„ì¬ì¸µ").innerText = `${ìœ ì €ë°ì´í„°.í˜„ì¬ì¸µ}ì¸µ`;
        });

        document.addEventListener("DOMContentLoaded", async () => {
            const { data: { user }, error: ì¸ì¦ì˜¤ë¥˜ } = await supabase.auth.getUser();

            if (ì¸ì¦ì˜¤ë¥˜) {
                ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", "ìœ ì € ì¸ì¦ í™•ì¸ ì‹¤íŒ¨", "#ef4444");
                return;
            }

            if (user && user.id) {
                try {
                    // âœ… ë¨¼ì € ë²„ì „ì—… í™•ì¸
                    const { data: ë²„ì „ì²´í¬, error: ë²„ì „ì—ëŸ¬ } = await supabase
                        .from("users")
                        .select("ë²„ì „ì—…")
                        .eq("ìœ ì €UID", user.id)
                        .single();

                    if (ë²„ì „ì—ëŸ¬ || !ë²„ì „ì²´í¬) {
                        ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "âš ï¸", "ìœ ì € ì •ë³´ ì—†ìŒ", "#ef4444");
                        return;
                    }

                    if (ë²„ì „ì²´í¬.ë²„ì „ì—… !== 4) {
                        await fetch("/delete-user", {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({ ìœ ì €UID: user.id })
                        });

                        await supabase.auth.signOut();
                        alert("ë“œë½ì‹¤ ë²¨ê³ ë¥´ ë§ˆí•˜ íˆ¬ë¼í¬... ì—ì´ë¼ìŠ¤ ë…¸ í¬ì‚´. ë©”í…Œì˜¤!");
                        location.reload();
                        alert("ë©”í…Œì˜¤ë¥¼ ë§ê³  ìƒˆë¡œ íƒœì–´ë‚©ë‹ˆë‹¤.");
                        return;
                    }

                    // âœ… ë¬¸ì œ ì—†ìœ¼ë©´ ì „ì²´ ìœ ì € ì •ë³´ ë¡œë”©
                    const { data: ìœ ì €ì •ë³´, error } = await supabase
                        .from("users")
                        .select("*")
                        .eq("ìœ ì €UID", user.id)
                        .single();

                    if (error || !ìœ ì €ì •ë³´) {
                        ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "âš ï¸", "ìœ ì € ì •ë³´ ì—†ìŒ", "#ef4444");
                        return;
                    }

                    ìœ ì €ë°ì´í„° = ìœ ì €ì •ë³´;

                    ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "âœ…", "ìë™ ë¡œê·¸ì¸ ì™„ë£Œ", "#00c851");



                    // âœ… ìŠ¤íƒœë¯¸ë„ˆ ê°±ì‹  ìš”ì²­
                    try {
                        const ì‘ë‹µ = await fetch("/refresh-stamina", {
                            method: "POST",
                            headers: { "Content-Type": "application/json" },
                            body: JSON.stringify({ ìœ ì €UID: ìœ ì €ì •ë³´.ìœ ì €UID })
                        });

                        const ê²°ê³¼ = await ì‘ë‹µ.json();
                        if (ì‘ë‹µ.ok && ê²°ê³¼.ìœ ì €ë°ì´í„°) {
                            ìœ ì €ì •ë³´.í˜„ì¬ìŠ¤íƒœë¯¸ë„ˆ = ê²°ê³¼.ìœ ì €ë°ì´í„°.í˜„ì¬ìŠ¤íƒœë¯¸ë„ˆ;
                            ìœ ì €ì •ë³´.ìŠ¤íƒœë¯¸ë„ˆê°±ì‹ ì‹œê° = ê²°ê³¼.ìœ ì €ë°ì´í„°.ìŠ¤íƒœë¯¸ë„ˆê°±ì‹ ì‹œê°;
                        }
                    } catch (e) {
                        console.warn("ìŠ¤íƒœë¯¸ë„ˆ ê°±ì‹  ì‹¤íŒ¨", e);
                    }

                    ì „íˆ¬í™”ë©´ë³´ì—¬ì£¼ê¸°(ìœ ì €ë°ì´í„°);

                } catch (e) {
                    ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "", "ìë™ ë¡œê·¸ì¸ ì˜¤ë¥˜: " + e.message, "#ef4444");
                }
            } else {
                ë©”ì‹œì§€í‘œì‹œ(ë©”ì‹œì§€í‘œì‹œë°•ìŠ¤, "ğŸ”’", "ë¡œê·¸ì¸ëœ ìœ ì € ì—†ìŒ", "#aaa");
            }

        });

        document.addEventListener("click", function () {
            const ë°•ìŠ¤ = document.getElementById("ë„¤ì˜¨ë°•ìŠ¤");
            if (ë°•ìŠ¤) {
                ë°•ìŠ¤.style.display = "none";
            }
        });


        // ì—…ë°ì´íŠ¸
        document.getElementById("ë²„ì „í‘œì‹œ").innerText = "v6";
        ////git add . && git commit -m "fix: gagl.html serving enabled" && git push origin main

        const ë²„ì „ë²„íŠ¼ = document.getElementById("ë²„ì „í‘œì‹œ");
        ë²„ì „ë²„íŠ¼.style.cursor = "pointer";

        const ë©”ë‰´ì–¼ì°½ = document.createElement("div");
        ë©”ë‰´ì–¼ì°½.id = "ë©”ë‰´ì–¼ì°½";
        ë©”ë‰´ì–¼ì°½.className = "ì‚¬ë°±í”½ì…€í…Œë‘ë¦¬";
        ë©”ë‰´ì–¼ì°½.style.position = "fixed";
        ë©”ë‰´ì–¼ì°½.style.top = "40px";
        ë©”ë‰´ì–¼ì°½.style.left = "10px";
        ë©”ë‰´ì–¼ì°½.style.background = "#000";
        ë©”ë‰´ì–¼ì°½.style.color = "white";
        ë©”ë‰´ì–¼ì°½.style.zIndex = "9999";
        ë©”ë‰´ì–¼ì°½.style.width = "fit-content";
        // ë©”ë‰´ì–¼ì°½.style.whiteSpace = "nowrap";
        ë©”ë‰´ì–¼ì°½.style.display = "none";
        ë©”ë‰´ì–¼ì°½.innerHTML = `
  <div style="font-weight: bold; margin-bottom: 10px;">ğŸ“˜ ìš´ì˜ì ë©”ë‰´ì–¼</div>
  <div>
0. ë‹¤ì‹œë§Œë‚˜ ë°˜ê°‘ìŠµë‹ˆë‹¤<br>
1. ë„ë°•ì€ ì •ì‹ ê±´ê°•ì— í•´ë¡­ê¸° ë•Œë¬¸ì— íì§€í–ˆìŠµë‹ˆë‹¤<br>
2. ë ˆì–´ëª¬ìŠ¤í„° ë“±ì¥ ì‹œ, í˜„ì¬ ì¸µì„ ë‚´ë¦¬ì‹œë©´<br>
ê³µëµì— ë„ì›€ì´ ë©ë‹ˆë‹¤<br>
3. ë”ì´ìƒ ì¥ë¹„ ì¤‘ë³µ ë“œëìœ¼ë¡œ ê³µê²©ë ¥ì´ ì¦ê°€í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤<br>
í•©ì„± ì‹œ ìµœëŒ€ì²´ë ¥ë§Œ 1ì”© ì¦ê°€í•©ë‹ˆë‹¤<br>
4. ì¥ë¹„ ê°•í™” ì‹¤íŒ¨ ì‹œ ê°•í™”ìˆ˜ì¹˜ê°€ í•˜ë½í•©ë‹ˆë‹¤<br>
5. ë§¤ì¼ ì•„ì¹¨ 9ì‹œì— ìŠ¤íƒœë¯¸ë„ˆê°€ ìµœëŒ€ì¹˜ë¡œ íšŒë³µë©ë‹ˆë‹¤<br>
6. ë“±ì¥í•œ ë ˆì–´ëª¬ìŠ¤í„°ëŠ” í™”ë©´ì „í™˜ì‹œ ì‚¬ë¼ì§‘ë‹ˆë‹¤<br>
ì§€ê¸ˆ ì´ ìˆœê°„ì— ì²˜ë¦¬í•˜ì…”ì•¼ í•©ë‹ˆë‹¤<br>
7. ì•…ë§ˆì„± ë²„íŠ¼ë‹¤ìš´ ì§€ì† ì‹œ ìë™ê³µê²©ë©ë‹ˆë‹¤<br>
<br>
í–‰ìš´ì„ ë¹•ë‹ˆë‹¤<br>
<br>
ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡ã…¡<br>
<br>
íŒ¨ì¹˜ë…¸íŠ¸<br>
1. ë ˆì–´ëª¬ìŠ¤í„° ì‚¬ëƒ¥ì‹œ ì¥ë¹„ë“œëí™•ë¥ ê³¼ ê°•í™”í™•ë¥ ì´ ìƒí–¥ë˜ì—ˆìŠµë‹ˆë‹¤<br>

</div>
`;
        // ì—…ë°ì´íŠ¸

        document.body.appendChild(ë©”ë‰´ì–¼ì°½);

        ë²„ì „ë²„íŠ¼.addEventListener("click", () => {
            ë©”ë‰´ì–¼ì°½.style.display = (ë©”ë‰´ì–¼ì°½.style.display === "none") ? "block" : "none";
        });

        document.addEventListener("click", (e) => {
            if (
                ë©”ë‰´ì–¼ì°½.style.display === "block" &&
                !ë©”ë‰´ì–¼ì°½.contains(e.target) &&
                !ë²„ì „ë²„íŠ¼.contains(e.target)
            ) {
                ë©”ë‰´ì–¼ì°½.style.display = "none";
            }
        });


        let ìë™ê³µê²©íƒ€ì´ë¨¸ = null;

        const ê³µê²©ë²„íŠ¼ = document.getElementById("ê³µê²©ë²„íŠ¼");
        const ë ˆì–´ëª¬ìŠ¤í„°ë²„íŠ¼ = document.getElementById("ë ˆì–´ëª¬ìŠ¤í„°");

        ê³µê²©ë²„íŠ¼.addEventListener("mousedown", () => {
            if (ìë™ê³µê²©íƒ€ì´ë¨¸) return;

            ìë™ê³µê²©íƒ€ì´ë¨¸ = setInterval(() => {
                // ë ˆì–´ëª¬ìŠ¤í„° ë“±ì¥ ì‹œ ìë™ê³µê²© ì •ì§€
                const ë ˆì–´ëª¬ìŠ¤í„°í‘œì‹œ = getComputedStyle(ë ˆì–´ëª¬ìŠ¤í„°ë²„íŠ¼).display === "block";
                if (ë ˆì–´ëª¬ìŠ¤í„°í‘œì‹œ) {
                    clearInterval(ìë™ê³µê²©íƒ€ì´ë¨¸);
                    ìë™ê³µê²©íƒ€ì´ë¨¸ = null;
                    return;
                }

                ê³µê²©ë²„íŠ¼.click();
            }, 1000); // 0.5ì´ˆ ê°„ê²©ìœ¼ë¡œ ê³µê²©
        });

        ["mouseup", "mouseleave"].forEach(event => {
            document.addEventListener(event, () => {
                if (ìë™ê³µê²©íƒ€ì´ë¨¸) {
                    clearInterval(ìë™ê³µê²©íƒ€ì´ë¨¸);
                    ìë™ê³µê²©íƒ€ì´ë¨¸ = null;
                }
            });
        });


    </script>
</body>

</html>